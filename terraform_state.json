{"format_version":"1.0","terraform_version":"1.10.3","values":{"outputs":{"alb_dns_name":{"sensitive":false,"value":"demo-alb-82a5a8b2-60644634.us-east-1.elb.amazonaws.com","type":"string"},"application_url":{"sensitive":false,"value":"http://demo-alb-82a5a8b2-60644634.us-east-1.elb.amazonaws.com","type":"string"},"container_name":{"sensitive":false,"value":"my-container-nginx","type":"string"},"container_names":{"sensitive":false,"value":{"nginx":"my-container-nginx","nodejs":"my-container-nodejs"},"type":["object",{"nginx":"string","nodejs":"string"}]},"debug_ecs_service":{"sensitive":false,"value":{"service_id":"arn:aws:ecs:us-east-1:010575877879:service/demo-cluster-82a5a8b2/ECS-s-node","service_name":"ECS-s-node"},"type":["object",{"service_id":"string","service_name":"string"}]},"full_access_policy_arn":{"sensitive":false,"value":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","type":"string"},"instance_ips":{"sensitive":false,"value":[],"type":["list","string"]},"key_file_path":{"sensitive":false,"value":"/Users/sagi/Desktop/terraform/git/ecs_auto_deployment-/ecs-instance-key-82a5a8b2.pem","type":"string"},"key_name":{"sensitive":false,"value":"ecs-instance-key-82a5a8b2","type":"string"},"module_path":{"sensitive":false,"value":".","type":"string"},"rendered_user_data":{"sensitive":true,"value":"#!/bin/bash\n\n# Enable debugging and logging\nset -x\nexec \u003e \u003e(tee /var/log/user-data.log | logger -t user-data -s 2\u003e/dev/console) 2\u003e\u00261\n\n# Function for logging\nlog() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n}\n\nlog \"Starting user data script execution\"\n\nsleep 5\n\n# Function to wait for yum to be free\nwait_for_yum() {\n    while sudo fuser /var/run/yum.pid \u003e /dev/null 2\u003e\u00261; do\n        log \"Waiting for yum to be free...\"\n        sleep 5\n    done\n}\n\n# Update system packages\nlog 'Updating system packages'\nsudo yum update -y\nwait\n\n\n# Install AWS CLI\nlog \"Installing AWS CLI\"\nsudo yum install -y aws-cli\nwait\n\n# Set and export variables\nexport CLUSTER_NAME=\"demo-cluster-82a5a8b2\"\nexport LOG_GROUP_NAME=\"log_group-82a5a8b2\"\nexport LOG_STREAM_NAME=\"ecs\"\nexport REGION=\"us-east-1\"\n\n\n# Write environment variables to /etc/environment for persistence\necho \"CLUSTER_NAME=demo-cluster-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_GROUP_NAME=log_group-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_STREAM_NAME=ecs\" | sudo tee -a /etc/environment\necho \"REGION=us-east-1\" | sudo tee -a /etc/environment\n\n\n# # Reload environment variables to make them available in the current session\nsource /etc/environment\n\n# Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\nlog \"Setting up environment variables\"\nsudo mkdir -p /etc/ecs\nsudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\nECS_CLUSTER=$CLUSTER_NAME\nECS_LOGLEVEL=debug\nECS_LOGFILE=/var/log/ecs/ecs-agent.log\nECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\nECS_ENABLE_CONTAINER_METADATA=true\nECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\nECS_IMAGE_CLEANUP_INTERVAL=10m\nECS_ENGINE_AUTH_TYPE=docker\n\nECS_DATADIR=/data\nECS_ENABLE_SPOT_INSTANCE_DRAINING=true\nECS_CONTAINER_STOP_TIMEOUT=30s\nECS_CONTAINER_START_TIMEOUT=3m\nECS_ENABLE_TASK_IAM_ROLE=true\nECS_DOCKER_API_VERSION=1.24\nECS_CONTAINER_METADATA_URI_ENDPOINT=v4\nEOF\n\ndocker stop ecs-agent\n\ndocker rm -f ecs-agent\n\n\n# delete the ECS agent's state file to allow it to reinitialize with the correct configuration:\nsudo rm /var/lib/ecs/data/agent.db\n\nsudo systemctl restart ecs\n\n\n# Additional verification steps\ndocker info || log \"Docker not running properly\"\ncurl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n# # Update the system and install the latest ECS agent\n# yum update -y\n# amazon-linux-extras install -y ecs\n# yum install -y ecs-init\n\n# # Configure ECS cluster\n# echo \"ECS_CLUSTER=MyCluster\" \u003e\u003e /etc/ecs/ecs.config\n\n# # Start ECS service\n# systemctl enable --now ecs\n\n# # Restart Docker to ensure it's running the latest version\n# systemctl restart docker\n\n# # Wait for Docker to be fully operational\n# timeout=60\n# while [ $timeout -gt 0 ]; do\n#     if docker info \u0026\u003e/dev/null; then\n#         break\n#     fi\n#     sleep 1\n#     ((timeout--))\n# done\n\n# if [ $timeout -eq 0 ]; then\n#     echo \"Docker did not start within the expected time frame\"\n#     exit 1\n# fi\n\n# # Check the ECS agent version\n# ecs_agent_version=$(docker inspect ecs-agent | grep Version | head -n 1)\n# echo \"ECS Agent Version: $ecs_agent_version\"\n\n# # Verify ECS agent is running\n# if curl -s http://localhost:51678/v1/metadata \u0026\u003e/dev/null; then\n#     echo \"ECS agent is responding\"\n# else\n#     echo \"ECS agent is not responding\"\n# fi\n\n# echo \"User data script completed\"\n\n\n# # Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\n# log \"Setting up environment variables\"\n# sudo mkdir -p /etc/ecs\n# sudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\n# ECS_CLUSTER=$CLUSTER_NAME\n# ECS_LOGLEVEL=debug\n# ECS_LOGFILE=/var/log/ecs/ecs-agent.log\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n# ECS_ENGINE_AUTH_DATA={\"https://index.docker.io/v1/\": {\"username\": \"$DOCKERHUB_USERNAME\", \"password\": \"$DOCKERHUB_PASSWORD\"}}\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF\n\n# # Set proper permissions\n# log \"Setting permissions on ECS config\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n# # Create data directory\n# log \"Creating ECS data directory\"\n# sudo mkdir -p /data\n# sudo chmod 744 /data\n\n# # Clean up any existing ECS containers\n# log \"Cleaning up existing ECS containers\"\n# if command -v docker \u0026\u003e /dev/null; then\n#     if docker ps -a --filter name=ecs-agent | grep -q .; then\n#         docker rm -f $(docker ps -a --filter name=ecs-agent -q)\n#     fi\n# fi\n\n# # Stop and disable the default ECS service if it exists\n# log \"Managing ECS services\"\n# if systemctl is-active ecs.service \u0026\u003e /dev/null; then\n#     sudo systemctl stop ecs.service\n#     sudo systemctl disable ecs.service\n# fi\n\n# # Update and start Docker\n# log \"Updating and starting Docker\"\n# sudo yum update -y docker\n# sudo systemctl enable docker\n# sudo systemctl start docker\n\n# # Wait for Docker to be fully started\n# log 'Waiting for Docker to start...'\n# until sudo systemctl is-active --quiet docker; do\n#     sleep 5\n# done\n\n# # Update ECS agent\n# log \"Updating ECS agent\"\n# sudo yum update -y ecs-init\n# sudo systemctl stop ecs \n# docker rm -f ecs-agent\n# rm -rf /var/lib/ecs/data/*\n# sudo systemctl enable ecs\n# sudo systemctl start ecs\n\n# # Final verification\n# log \"Verifying ECS agent status\"\n# sleep 10\n# sudo systemctl status ecs\n\n# # Log completion\n# log \"User data script completed\"\n\n# # Additional verification steps\n# docker info || log \"Docker not running properly\"\n# curl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# # Function for logging\n# log() {\n#     echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n# }\n\n# #install cli\n# sudo yum install -y aws-cli\n\n\n# # Function to clean up any existing ECS agent containers\n# cleanup_ecs_containers() {\n#     log \"Checking for existing ECS agent containers...\"\n    \n#     # Stop any running ecs-agent container\n#     if docker ps -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found running ECS agent container. Stopping it...\"\n#         sudo docker stop ecs-agent || log \"Warning: Failed to stop ECS agent container\"\n#     fi\n    \n#     # Remove any existing ecs-agent container (running or stopped)\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found ECS agent container. Removing it...\"\n#         sudo docker rm -f ecs-agent || log \"Warning: Failed to remove ECS agent container\"\n#     fi\n    \n#     # Double check no containers are left\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Error: Failed to remove all ECS agent containers\"\n#         return 1\n#     fi\n    \n#     log \"ECS agent container cleanup completed successfully\"\n#     return 0\n# }\n\n# # Stop the services\n# log \"Stopping ECS service\"\n# sudo systemctl stop docker || log \"Failed to stop docker service\"\n# sudo systemctl stop ecs || log \"Failed to stop ECS service\"\n# sleep 5\n\n# # Update Docker\n# sudo yum update docker\n\n# # Start Docker\n# sudo systemctl start docker\n\n# # Clean up any existing ECS containers before proceeding\n# if ! cleanup_ecs_containers; then\n#     log \"Error: Failed to clean up existing ECS containers. Exiting.\"\n#     exit 1\n# fi\n\n# #Create ECS config file\n# log \"Creating ECS config\"\n# sudo bash -c 'cat \u003c\u003c EOF \u003e /etc/ecs/ecs.config\n# ECS_CLUSTER=demo-cluster-82a5a8b2\n# ECS_LOGLEVEL=debug\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF'\n\n# # Set proper permissions\n# log \"Setting ECS config permissions\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n\n# #restart docker\n# sudo systemctl restart docker\n\n\n# #update ecs agent\n# sudo yum update -y ecs-init\n\n# #restart ecs agent\n# sudo systemctl restart ecs\n\n\n# Start ECS agent with platform specification\n# sudo systemctl start ecs\n# log \"Starting ECS agent container\"\n# sudo docker run --name ecs-agent \\\n#     --detach=true \\\n#     --restart=on-failure:10 \\\n#     --volume=/var/run:/var/run \\\n#     --volume=/var/log/ecs:/log \\\n#     --volume=/var/lib/ecs/data:/data \\\n#     --volume=/etc/ecs:/etc/ecs \\\n#     --net=host \\\n#     --env-file=/etc/ecs/ecs.config \\\n#     --platform linux/amd64 \\\n#     public.ecr.aws/ecs/amazon-ecs-agent:latest\n\n\n\n\n\n\n","type":"string"},"selected_ecs_optimized_ami_id":{"sensitive":false,"value":"ami-0448a709165fd89ff","type":"string"},"ssh_commands":{"sensitive":false,"value":[],"type":["tuple",[]]},"task_definition_container_name_for_nginx":{"sensitive":false,"value":"my-container-nginx","type":"string"}},"root_module":{"resources":[{"address":"data.aws_ami.ecs_optimized","mode":"data","type":"aws_ami","name":"ecs_optimized","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0448a709165fd89ff","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-00309ff3c3011fb97","throughput":"0","volume_size":"30","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2024-12-18T01:23:13.000Z","deprecation_time":"2026-12-18T01:23:13.000Z","description":"Amazon Linux AMI 2.0.20241217 x86_64 ECS HVM GP2","ena_support":true,"executable_users":null,"filter":[{"name":"architecture","values":["x86_64"]},{"name":"name","values":["amzn2-ami-ecs-hvm-*-x86_64-ebs"]},{"name":"owner-id","values":["591542846629"]},{"name":"root-device-type","values":["ebs"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-0448a709165fd89ff","image_id":"ami-0448a709165fd89ff","image_location":"amazon/amzn2-ami-ecs-hvm-2.0.20241217-x86_64-ebs","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","most_recent":true,"name":"amzn2-ami-ecs-hvm-2.0.20241217-x86_64-ebs","name_regex":null,"owner_id":"591542846629","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-00309ff3c3011fb97","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]},{"values":[false]},{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":"available","timeouts":null,"zone_ids":["use1-az2","use1-az4","use1-az6","use1-az1","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"data.aws_eips.all","mode":"data","type":"aws_eips","name":"all","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_ids":[],"filter":[{"name":"domain","values":["vpc"]}],"id":"us-east-1","public_ips":[],"tags":null,"timeouts":null},"sensitive_values":{"allocation_ids":[],"filter":[{"values":[false]}],"public_ips":[]}},{"address":"data.aws_instances.ecs_instances","mode":"data","type":"aws_instances","name":"ecs_instances","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"instance-state-name","values":["running"]},{"name":"tag:aws:autoscaling:groupName","values":["demo-asg-82a5a8b2-asg"]}],"id":"us-east-1","ids":["i-09efae67b0acd89a1"],"instance_state_names":null,"instance_tags":null,"ipv6_addresses":[],"private_ips":["10.0.2.161"],"public_ips":[],"timeouts":null},"sensitive_values":{"filter":[{"values":[false]},{"values":[false]}],"ids":[false],"ipv6_addresses":[],"private_ips":[false],"public_ips":[]}},{"address":"aws_eip.eip[0]","mode":"managed","type":"aws_eip","name":"eip","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-09a44f9729329b8c7","arn":"arn:aws:ec2:us-east-1:010575877879:elastic-ip/eipalloc-09a44f9729329b8c7","associate_with_private_ip":null,"association_id":"","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-09a44f9729329b8c7","instance":"","ipam_pool_id":null,"network_border_group":"us-east-1","network_interface":"","private_dns":null,"private_ip":"","ptr_record":"","public_dns":"ec2-98-85-18-91.compute-1.amazonaws.com","public_ip":"98.85.18.91","public_ipv4_pool":"amazon","tags":{"Name":"Managed-EIP-1"},"tags_all":{"Name":"Managed-EIP-1"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_eip.eip[1]","mode":"managed","type":"aws_eip","name":"eip","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0e31ca1c5078f51a7","arn":"arn:aws:ec2:us-east-1:010575877879:elastic-ip/eipalloc-0e31ca1c5078f51a7","associate_with_private_ip":null,"association_id":"","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0e31ca1c5078f51a7","instance":"","ipam_pool_id":null,"network_border_group":"us-east-1","network_interface":"","private_dns":null,"private_ip":"","ptr_record":"","public_dns":"ec2-44-198-73-39.compute-1.amazonaws.com","public_ip":"44.198.73.39","public_ipv4_pool":"amazon","tags":{"Name":"Managed-EIP-2"},"tags_all":{"Name":"Managed-EIP-2"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_key_pair.generated_key","mode":"managed","type":"aws_key_pair","name":"generated_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:key-pair/ecs-instance-key-82a5a8b2","fingerprint":"77:25:f2:66:26:57:a4:9e:d8:43:c8:26:36:85:af:9b","id":"ecs-instance-key-82a5a8b2","key_name":"ecs-instance-key-82a5a8b2","key_name_prefix":"","key_pair_id":"key-0a0a5522f73365573","key_type":"rsa","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDc/4j48g9FD9j0YdipsFQ+34IzQTafnd8liReWorO6HiWTKeZ2XyldbqHh8COGJt5gj9VMM48QKATxVByqS/XuYsLuzJesIrRLosl9aIdSTiVWAOfuWBKEtev34AhSe3/A0udIv5kXDdrCE5QXUHSlYYUKLwunqhicUaxqAShXLCPIDOza5ER4NdyVMIrtzHsdKUHisGX7NPTT3iaCsyrhrZFtGiwJ1KsdmgilEZ9FIT9I5aA8dYInGw679UytkZEEVcMGKeW/qixcmURoC/D4vo5A3dPZt/bdjMDDLhNZgOh9KFJFhqdcz08JNndT0y2nmdRqM2a5/NZGjlfUnJ6E0e4xPK8IuPC4SKO5MQaZdBM8OJoeID0IX4Kn33B+B5X1f8PbH7qvF9jDTFreQLh8Jg5ox8n4py53u3DfYJE5Vyeeoq32sr0jshRGw+lgPtxY8Rq6H5Cgaz3MyGpawSyZoSNfOjjISje2HnqrKxicMRzGWoNSubkTfAvlOS+3VV+caBBLYJLS4WDERGRzABPIKuzpZUfKcbnWqbx0rYw7bqYkelh1LuVZTjhhgMJ/+Y+2UsOSup/sWXDUgeOZK5J1BpjzqaIW8EKr7A3CF9RPU/7de02uEcq7+p+XOCb1f/xsR5w9LA0rP10XrhHP00kss2HfcEaM4FeV1yN4ldlKAw==","tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}},"depends_on":["random_id.unique","tls_private_key.ssh_key"]},{"address":"local_file.private_key","mode":"managed","type":"local_file","name":"private_key","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n","content_base64":null,"content_base64sha256":"JRTFbr3R4ZXWfrOvEq25YbT4HU+e5J8JActjisBCc1c=","content_base64sha512":"h43wxu29faS6c87Dai0Gg+/MyUmb1atVw/WOn/uoH014v9ye/Glb8hhZtpagI4cZWWExr9o3Ca/uOvYJS72d1Q==","content_md5":"d61884f9a6eb8ec3cdc8346a4a536155","content_sha1":"99ee42f71b31630bcb4fbedf939efd33aac32fd0","content_sha256":"2514c56ebdd1e195d67eb3af12adb961b4f81d4f9ee49f0901cb638ac0427357","content_sha512":"878df0c6edbd7da4ba73cec36a2d0683efccc9499bd5ab55c3f58e9ffba81f4d78bfdc9efc695bf21859b696a0238719596131afda3709afee3af6094bbd9dd5","directory_permission":"0777","file_permission":"0600","filename":"/Users/sagi/Desktop/terraform/git/ecs_auto_deployment-/ecs-instance-key-82a5a8b2.pem","id":"99ee42f71b31630bcb4fbedf939efd33aac32fd0","sensitive_content":null,"source":null},"sensitive_values":{"content":true,"sensitive_content":true},"depends_on":["aws_key_pair.generated_key","random_id.unique","tls_private_key.ssh_key"]},{"address":"local_file.rendered_user_data","mode":"managed","type":"local_file","name":"rendered_user_data","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"#!/bin/bash\n\n# Enable debugging and logging\nset -x\nexec \u003e \u003e(tee /var/log/user-data.log | logger -t user-data -s 2\u003e/dev/console) 2\u003e\u00261\n\n# Function for logging\nlog() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n}\n\nlog \"Starting user data script execution\"\n\nsleep 5\n\n# Function to wait for yum to be free\nwait_for_yum() {\n    while sudo fuser /var/run/yum.pid \u003e /dev/null 2\u003e\u00261; do\n        log \"Waiting for yum to be free...\"\n        sleep 5\n    done\n}\n\n# Update system packages\nlog 'Updating system packages'\nsudo yum update -y\nwait\n\n\n# Install AWS CLI\nlog \"Installing AWS CLI\"\nsudo yum install -y aws-cli\nwait\n\n# Set and export variables\nexport CLUSTER_NAME=\"demo-cluster-82a5a8b2\"\nexport LOG_GROUP_NAME=\"log_group-82a5a8b2\"\nexport LOG_STREAM_NAME=\"ecs\"\nexport REGION=\"us-east-1\"\n\n\n# Write environment variables to /etc/environment for persistence\necho \"CLUSTER_NAME=demo-cluster-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_GROUP_NAME=log_group-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_STREAM_NAME=ecs\" | sudo tee -a /etc/environment\necho \"REGION=us-east-1\" | sudo tee -a /etc/environment\n\n\n# # Reload environment variables to make them available in the current session\nsource /etc/environment\n\n# Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\nlog \"Setting up environment variables\"\nsudo mkdir -p /etc/ecs\nsudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\nECS_CLUSTER=$CLUSTER_NAME\nECS_LOGLEVEL=debug\nECS_LOGFILE=/var/log/ecs/ecs-agent.log\nECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\nECS_ENABLE_CONTAINER_METADATA=true\nECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\nECS_IMAGE_CLEANUP_INTERVAL=10m\nECS_ENGINE_AUTH_TYPE=docker\n\nECS_DATADIR=/data\nECS_ENABLE_SPOT_INSTANCE_DRAINING=true\nECS_CONTAINER_STOP_TIMEOUT=30s\nECS_CONTAINER_START_TIMEOUT=3m\nECS_ENABLE_TASK_IAM_ROLE=true\nECS_DOCKER_API_VERSION=1.24\nECS_CONTAINER_METADATA_URI_ENDPOINT=v4\nEOF\n\ndocker stop ecs-agent\n\ndocker rm -f ecs-agent\n\n\n# delete the ECS agent's state file to allow it to reinitialize with the correct configuration:\nsudo rm /var/lib/ecs/data/agent.db\n\nsudo systemctl restart ecs\n\n\n# Additional verification steps\ndocker info || log \"Docker not running properly\"\ncurl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n# # Update the system and install the latest ECS agent\n# yum update -y\n# amazon-linux-extras install -y ecs\n# yum install -y ecs-init\n\n# # Configure ECS cluster\n# echo \"ECS_CLUSTER=MyCluster\" \u003e\u003e /etc/ecs/ecs.config\n\n# # Start ECS service\n# systemctl enable --now ecs\n\n# # Restart Docker to ensure it's running the latest version\n# systemctl restart docker\n\n# # Wait for Docker to be fully operational\n# timeout=60\n# while [ $timeout -gt 0 ]; do\n#     if docker info \u0026\u003e/dev/null; then\n#         break\n#     fi\n#     sleep 1\n#     ((timeout--))\n# done\n\n# if [ $timeout -eq 0 ]; then\n#     echo \"Docker did not start within the expected time frame\"\n#     exit 1\n# fi\n\n# # Check the ECS agent version\n# ecs_agent_version=$(docker inspect ecs-agent | grep Version | head -n 1)\n# echo \"ECS Agent Version: $ecs_agent_version\"\n\n# # Verify ECS agent is running\n# if curl -s http://localhost:51678/v1/metadata \u0026\u003e/dev/null; then\n#     echo \"ECS agent is responding\"\n# else\n#     echo \"ECS agent is not responding\"\n# fi\n\n# echo \"User data script completed\"\n\n\n# # Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\n# log \"Setting up environment variables\"\n# sudo mkdir -p /etc/ecs\n# sudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\n# ECS_CLUSTER=$CLUSTER_NAME\n# ECS_LOGLEVEL=debug\n# ECS_LOGFILE=/var/log/ecs/ecs-agent.log\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n# ECS_ENGINE_AUTH_DATA={\"https://index.docker.io/v1/\": {\"username\": \"$DOCKERHUB_USERNAME\", \"password\": \"$DOCKERHUB_PASSWORD\"}}\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF\n\n# # Set proper permissions\n# log \"Setting permissions on ECS config\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n# # Create data directory\n# log \"Creating ECS data directory\"\n# sudo mkdir -p /data\n# sudo chmod 744 /data\n\n# # Clean up any existing ECS containers\n# log \"Cleaning up existing ECS containers\"\n# if command -v docker \u0026\u003e /dev/null; then\n#     if docker ps -a --filter name=ecs-agent | grep -q .; then\n#         docker rm -f $(docker ps -a --filter name=ecs-agent -q)\n#     fi\n# fi\n\n# # Stop and disable the default ECS service if it exists\n# log \"Managing ECS services\"\n# if systemctl is-active ecs.service \u0026\u003e /dev/null; then\n#     sudo systemctl stop ecs.service\n#     sudo systemctl disable ecs.service\n# fi\n\n# # Update and start Docker\n# log \"Updating and starting Docker\"\n# sudo yum update -y docker\n# sudo systemctl enable docker\n# sudo systemctl start docker\n\n# # Wait for Docker to be fully started\n# log 'Waiting for Docker to start...'\n# until sudo systemctl is-active --quiet docker; do\n#     sleep 5\n# done\n\n# # Update ECS agent\n# log \"Updating ECS agent\"\n# sudo yum update -y ecs-init\n# sudo systemctl stop ecs \n# docker rm -f ecs-agent\n# rm -rf /var/lib/ecs/data/*\n# sudo systemctl enable ecs\n# sudo systemctl start ecs\n\n# # Final verification\n# log \"Verifying ECS agent status\"\n# sleep 10\n# sudo systemctl status ecs\n\n# # Log completion\n# log \"User data script completed\"\n\n# # Additional verification steps\n# docker info || log \"Docker not running properly\"\n# curl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# # Function for logging\n# log() {\n#     echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n# }\n\n# #install cli\n# sudo yum install -y aws-cli\n\n\n# # Function to clean up any existing ECS agent containers\n# cleanup_ecs_containers() {\n#     log \"Checking for existing ECS agent containers...\"\n    \n#     # Stop any running ecs-agent container\n#     if docker ps -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found running ECS agent container. Stopping it...\"\n#         sudo docker stop ecs-agent || log \"Warning: Failed to stop ECS agent container\"\n#     fi\n    \n#     # Remove any existing ecs-agent container (running or stopped)\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found ECS agent container. Removing it...\"\n#         sudo docker rm -f ecs-agent || log \"Warning: Failed to remove ECS agent container\"\n#     fi\n    \n#     # Double check no containers are left\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Error: Failed to remove all ECS agent containers\"\n#         return 1\n#     fi\n    \n#     log \"ECS agent container cleanup completed successfully\"\n#     return 0\n# }\n\n# # Stop the services\n# log \"Stopping ECS service\"\n# sudo systemctl stop docker || log \"Failed to stop docker service\"\n# sudo systemctl stop ecs || log \"Failed to stop ECS service\"\n# sleep 5\n\n# # Update Docker\n# sudo yum update docker\n\n# # Start Docker\n# sudo systemctl start docker\n\n# # Clean up any existing ECS containers before proceeding\n# if ! cleanup_ecs_containers; then\n#     log \"Error: Failed to clean up existing ECS containers. Exiting.\"\n#     exit 1\n# fi\n\n# #Create ECS config file\n# log \"Creating ECS config\"\n# sudo bash -c 'cat \u003c\u003c EOF \u003e /etc/ecs/ecs.config\n# ECS_CLUSTER=demo-cluster-82a5a8b2\n# ECS_LOGLEVEL=debug\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF'\n\n# # Set proper permissions\n# log \"Setting ECS config permissions\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n\n# #restart docker\n# sudo systemctl restart docker\n\n\n# #update ecs agent\n# sudo yum update -y ecs-init\n\n# #restart ecs agent\n# sudo systemctl restart ecs\n\n\n# Start ECS agent with platform specification\n# sudo systemctl start ecs\n# log \"Starting ECS agent container\"\n# sudo docker run --name ecs-agent \\\n#     --detach=true \\\n#     --restart=on-failure:10 \\\n#     --volume=/var/run:/var/run \\\n#     --volume=/var/log/ecs:/log \\\n#     --volume=/var/lib/ecs/data:/data \\\n#     --volume=/etc/ecs:/etc/ecs \\\n#     --net=host \\\n#     --env-file=/etc/ecs/ecs.config \\\n#     --platform linux/amd64 \\\n#     public.ecr.aws/ecs/amazon-ecs-agent:latest\n\n\n\n\n\n\n","content_base64":null,"content_base64sha256":"aSL2eQjm2nPcJAdEd+t8Ot5telHGbfFbN3R0v9fsaTw=","content_base64sha512":"+hYb9q8pSBcF2oniT6xTcK0xCchkmjFPcgH2saWxy4Fg5wf0QNxMtMDJLzQNrDYrkrsIa0POyzR2s6AJ8YtNuw==","content_md5":"c7453433c96419f51bba9d2c710a4aa3","content_sha1":"8b0e2faebf62ae8c4248648550897cb7ffd72fd0","content_sha256":"6922f67908e6da73dc24074477eb7c3ade6d7a51c66df15b377474bfd7ec693c","content_sha512":"fa161bf6af29481705da89e24fac5370ad3109c8649a314f7201f6b1a5b1cb8160e707f440dc4cb4c0c92f340dac362b92bb086b43cecb3476b3a009f18b4dbb","directory_permission":"0777","file_permission":"0777","filename":"./rendered_user_data.sh","id":"8b0e2faebf62ae8c4248648550897cb7ffd72fd0","sensitive_content":null,"source":null},"sensitive_values":{"sensitive_content":true},"depends_on":["data.aws_availability_zones.available","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.data.aws_region.current","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"local_file.user_data","mode":"managed","type":"local_file","name":"user_data","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"# Generated on: 2024-12-31 14:03:39 UTC\n# Cluster: demo-cluster-82a5a8b2\n# Region: us-east-1\n\n#!/bin/bash\n\n# Enable debugging and logging\nset -x\nexec \u003e \u003e(tee /var/log/user-data.log | logger -t user-data -s 2\u003e/dev/console) 2\u003e\u00261\n\n# Function for logging\nlog() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n}\n\nlog \"Starting user data script execution\"\n\nsleep 5\n\n# Function to wait for yum to be free\nwait_for_yum() {\n    while sudo fuser /var/run/yum.pid \u003e /dev/null 2\u003e\u00261; do\n        log \"Waiting for yum to be free...\"\n        sleep 5\n    done\n}\n\n# Update system packages\nlog 'Updating system packages'\nsudo yum update -y\nwait\n\n\n# Install AWS CLI\nlog \"Installing AWS CLI\"\nsudo yum install -y aws-cli\nwait\n\n# Set and export variables\nexport CLUSTER_NAME=\"demo-cluster-82a5a8b2\"\nexport LOG_GROUP_NAME=\"log_group-82a5a8b2\"\nexport LOG_STREAM_NAME=\"ecs\"\nexport REGION=\"us-east-1\"\n\n\n# Write environment variables to /etc/environment for persistence\necho \"CLUSTER_NAME=demo-cluster-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_GROUP_NAME=log_group-82a5a8b2\" | sudo tee -a /etc/environment\necho \"LOG_STREAM_NAME=ecs\" | sudo tee -a /etc/environment\necho \"REGION=us-east-1\" | sudo tee -a /etc/environment\n\n\n# # Reload environment variables to make them available in the current session\nsource /etc/environment\n\n# Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\nlog \"Setting up environment variables\"\nsudo mkdir -p /etc/ecs\nsudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\nECS_CLUSTER=$CLUSTER_NAME\nECS_LOGLEVEL=debug\nECS_LOGFILE=/var/log/ecs/ecs-agent.log\nECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\nECS_ENABLE_CONTAINER_METADATA=true\nECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\nECS_IMAGE_CLEANUP_INTERVAL=10m\nECS_ENGINE_AUTH_TYPE=docker\n\nECS_DATADIR=/data\nECS_ENABLE_SPOT_INSTANCE_DRAINING=true\nECS_CONTAINER_STOP_TIMEOUT=30s\nECS_CONTAINER_START_TIMEOUT=3m\nECS_ENABLE_TASK_IAM_ROLE=true\nECS_DOCKER_API_VERSION=1.24\nECS_CONTAINER_METADATA_URI_ENDPOINT=v4\nEOF\n\ndocker stop ecs-agent\n\ndocker rm -f ecs-agent\n\n\n# delete the ECS agent's state file to allow it to reinitialize with the correct configuration:\nsudo rm /var/lib/ecs/data/agent.db\n\nsudo systemctl restart ecs\n\n\n# Additional verification steps\ndocker info || log \"Docker not running properly\"\ncurl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n# # Update the system and install the latest ECS agent\n# yum update -y\n# amazon-linux-extras install -y ecs\n# yum install -y ecs-init\n\n# # Configure ECS cluster\n# echo \"ECS_CLUSTER=MyCluster\" \u003e\u003e /etc/ecs/ecs.config\n\n# # Start ECS service\n# systemctl enable --now ecs\n\n# # Restart Docker to ensure it's running the latest version\n# systemctl restart docker\n\n# # Wait for Docker to be fully operational\n# timeout=60\n# while [ $timeout -gt 0 ]; do\n#     if docker info \u0026\u003e/dev/null; then\n#         break\n#     fi\n#     sleep 1\n#     ((timeout--))\n# done\n\n# if [ $timeout -eq 0 ]; then\n#     echo \"Docker did not start within the expected time frame\"\n#     exit 1\n# fi\n\n# # Check the ECS agent version\n# ecs_agent_version=$(docker inspect ecs-agent | grep Version | head -n 1)\n# echo \"ECS Agent Version: $ecs_agent_version\"\n\n# # Verify ECS agent is running\n# if curl -s http://localhost:51678/v1/metadata \u0026\u003e/dev/null; then\n#     echo \"ECS agent is responding\"\n# else\n#     echo \"ECS agent is not responding\"\n# fi\n\n# echo \"User data script completed\"\n\n\n# # Write environment variables to /etc/environment and /etc/ecs/ecs.config directory\n# log \"Setting up environment variables\"\n# sudo mkdir -p /etc/ecs\n# sudo tee /etc/ecs/ecs.config \u003e /dev/null \u003c\u003cEOF\n# ECS_CLUSTER=$CLUSTER_NAME\n# ECS_LOGLEVEL=debug\n# ECS_LOGFILE=/var/log/ecs/ecs-agent.log\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n# ECS_ENGINE_AUTH_DATA={\"https://index.docker.io/v1/\": {\"username\": \"$DOCKERHUB_USERNAME\", \"password\": \"$DOCKERHUB_PASSWORD\"}}\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF\n\n# # Set proper permissions\n# log \"Setting permissions on ECS config\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n# # Create data directory\n# log \"Creating ECS data directory\"\n# sudo mkdir -p /data\n# sudo chmod 744 /data\n\n# # Clean up any existing ECS containers\n# log \"Cleaning up existing ECS containers\"\n# if command -v docker \u0026\u003e /dev/null; then\n#     if docker ps -a --filter name=ecs-agent | grep -q .; then\n#         docker rm -f $(docker ps -a --filter name=ecs-agent -q)\n#     fi\n# fi\n\n# # Stop and disable the default ECS service if it exists\n# log \"Managing ECS services\"\n# if systemctl is-active ecs.service \u0026\u003e /dev/null; then\n#     sudo systemctl stop ecs.service\n#     sudo systemctl disable ecs.service\n# fi\n\n# # Update and start Docker\n# log \"Updating and starting Docker\"\n# sudo yum update -y docker\n# sudo systemctl enable docker\n# sudo systemctl start docker\n\n# # Wait for Docker to be fully started\n# log 'Waiting for Docker to start...'\n# until sudo systemctl is-active --quiet docker; do\n#     sleep 5\n# done\n\n# # Update ECS agent\n# log \"Updating ECS agent\"\n# sudo yum update -y ecs-init\n# sudo systemctl stop ecs \n# docker rm -f ecs-agent\n# rm -rf /var/lib/ecs/data/*\n# sudo systemctl enable ecs\n# sudo systemctl start ecs\n\n# # Final verification\n# log \"Verifying ECS agent status\"\n# sleep 10\n# sudo systemctl status ecs\n\n# # Log completion\n# log \"User data script completed\"\n\n# # Additional verification steps\n# docker info || log \"Docker not running properly\"\n# curl -s http://localhost:51678/v1/metadata || log \"ECS agent not responding\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# # Function for logging\n# log() {\n#     echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n# }\n\n# #install cli\n# sudo yum install -y aws-cli\n\n\n# # Function to clean up any existing ECS agent containers\n# cleanup_ecs_containers() {\n#     log \"Checking for existing ECS agent containers...\"\n    \n#     # Stop any running ecs-agent container\n#     if docker ps -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found running ECS agent container. Stopping it...\"\n#         sudo docker stop ecs-agent || log \"Warning: Failed to stop ECS agent container\"\n#     fi\n    \n#     # Remove any existing ecs-agent container (running or stopped)\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Found ECS agent container. Removing it...\"\n#         sudo docker rm -f ecs-agent || log \"Warning: Failed to remove ECS agent container\"\n#     fi\n    \n#     # Double check no containers are left\n#     if docker ps -a -q --filter name=ecs-agent | grep -q .; then\n#         log \"Error: Failed to remove all ECS agent containers\"\n#         return 1\n#     fi\n    \n#     log \"ECS agent container cleanup completed successfully\"\n#     return 0\n# }\n\n# # Stop the services\n# log \"Stopping ECS service\"\n# sudo systemctl stop docker || log \"Failed to stop docker service\"\n# sudo systemctl stop ecs || log \"Failed to stop ECS service\"\n# sleep 5\n\n# # Update Docker\n# sudo yum update docker\n\n# # Start Docker\n# sudo systemctl start docker\n\n# # Clean up any existing ECS containers before proceeding\n# if ! cleanup_ecs_containers; then\n#     log \"Error: Failed to clean up existing ECS containers. Exiting.\"\n#     exit 1\n# fi\n\n# #Create ECS config file\n# log \"Creating ECS config\"\n# sudo bash -c 'cat \u003c\u003c EOF \u003e /etc/ecs/ecs.config\n# ECS_CLUSTER=demo-cluster-82a5a8b2\n# ECS_LOGLEVEL=debug\n# ECS_AVAILABLE_LOGGING_DRIVERS=[\"json-file\",\"awslogs\"]\n# ECS_ENABLE_CONTAINER_METADATA=true\n# ECS_ENGINE_TASK_CLEANUP_WAIT_DURATION=1h\n# ECS_IMAGE_CLEANUP_INTERVAL=10m\n# ECS_ENGINE_AUTH_TYPE=docker\n\n# ECS_DATADIR=/data\n# ECS_ENABLE_SPOT_INSTANCE_DRAINING=true\n# ECS_CONTAINER_STOP_TIMEOUT=30s\n# ECS_CONTAINER_START_TIMEOUT=3m\n# ECS_ENABLE_TASK_IAM_ROLE=true\n# EOF'\n\n# # Set proper permissions\n# log \"Setting ECS config permissions\"\n# sudo chmod 644 /etc/ecs/ecs.config\n\n\n# #restart docker\n# sudo systemctl restart docker\n\n\n# #update ecs agent\n# sudo yum update -y ecs-init\n\n# #restart ecs agent\n# sudo systemctl restart ecs\n\n\n# Start ECS agent with platform specification\n# sudo systemctl start ecs\n# log \"Starting ECS agent container\"\n# sudo docker run --name ecs-agent \\\n#     --detach=true \\\n#     --restart=on-failure:10 \\\n#     --volume=/var/run:/var/run \\\n#     --volume=/var/log/ecs:/log \\\n#     --volume=/var/lib/ecs/data:/data \\\n#     --volume=/etc/ecs:/etc/ecs \\\n#     --net=host \\\n#     --env-file=/etc/ecs/ecs.config \\\n#     --platform linux/amd64 \\\n#     public.ecr.aws/ecs/amazon-ecs-agent:latest\n\n\n\n\n\n\n\n","content_base64":null,"content_base64sha256":"MUpwpoKhcjGSM2nP9rJiY2huqgLe4bXanI83cV5kjMU=","content_base64sha512":"jp8NM3gVaeIZMylpxmGNV1Z/y4miMMDC0ml7s+arMIplCMlIKst66jyqSFN8RM5NRTIaWgUPEBIEiZiTamau8A==","content_md5":"64347ab3a0db9b4e23b188bde36d3597","content_sha1":"fbb9597a224194db98f9aa7899f0feebfcdb7799","content_sha256":"314a70a682a17231923369cff6b26263686eaa02dee1b5da9c8f37715e648cc5","content_sha512":"8e9f0d33781569e219332969c6618d57567fcb89a230c0c2d2697bb3e6ab308a6508c9482acb7aea3caa48537c44ce4d45321a5a050f1012048998936a66aef0","directory_permission":"0777","file_permission":"0644","filename":"./rendered_user_data.sh","id":"fbb9597a224194db98f9aa7899f0feebfcdb7799","sensitive_content":null,"source":null},"sensitive_values":{"sensitive_content":true},"depends_on":["data.aws_availability_zones.available","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.data.aws_region.current","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"null_resource.check_task_status","mode":"managed","type":"null_resource","name":"check_task_status","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"id":"6481762651072464067","triggers":{"service_id":"arn:aws:ecs:us-east-1:010575877879:service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2"}},"sensitive_values":{"triggers":{}},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service.aws_ecs_service.app","module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"null_resource.cluster_ready","mode":"managed","type":"null_resource","name":"cluster_ready","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"id":"3789856090304683255","triggers":{"cluster_id":"arn:aws:ecs:us-east-1:010575877879:cluster/demo-cluster-82a5a8b2"}},"sensitive_values":{"triggers":{}},"depends_on":["data.aws_availability_zones.available","module.ecs_cluster.aws_ecs_cluster.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"null_resource.eip_disassociation[0]","mode":"managed","type":"null_resource","name":"eip_disassociation","index":0,"provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"id":"3992171096546840607","triggers":{"eip_id":"eipalloc-09a44f9729329b8c7"}},"sensitive_values":{"triggers":{}},"depends_on":["aws_eip.eip","data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"null_resource.eip_disassociation[1]","mode":"managed","type":"null_resource","name":"eip_disassociation","index":1,"provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"id":"7117950326029446924","triggers":{"eip_id":"eipalloc-0e31ca1c5078f51a7"}},"sensitive_values":{"triggers":{}},"depends_on":["aws_eip.eip","data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"null_resource.force_ecs_service_cleanup","mode":"managed","type":"null_resource","name":"force_ecs_service_cleanup","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"id":"3236407909013232021","triggers":{"cluster_name":"demo-cluster-82a5a8b2","nodejs_service_name":"ECS-s-node","service_name":"demo-ecs-Nservice-82a5a8b2"}},"sensitive_values":{"triggers":{}},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique","module.destroy.null_resource.comprehensive_ecs_destroy","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service.aws_ecs_service.app","module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","module.ecs_service_auto_scaling.aws_appautoscaling_policy.ecs_target_cpu","module.ecs_service_auto_scaling.aws_appautoscaling_policy.ecs_target_memory","module.ecs_service_auto_scaling.aws_appautoscaling_target.ecs_target","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_service_nodes.aws_security_group_rule.allow_alb_to_nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_policy.custom_ssm_policy","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.ecs_task_role.aws_iam_role_policy.container_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ec2_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecr_policy","module.ecs_task_role.aws_iam_role_policy.ecs_exec_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_instance_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_instance_docker_policy","module.ecs_task_role.aws_iam_role_policy.ecs_managed_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv1","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv2","module.ecs_task_role.aws_iam_role_policy.ecs_stop_task_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v1","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v2","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_network_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_role_vpc_policy","module.ecs_task_role.aws_iam_role_policy.enhanced_monitoring_policy","module.ecs_task_role.aws_iam_role_policy.task_cloudwatch_policy","module.ecs_task_role.aws_iam_role_policy.task_filesystem_write_policy","module.ecs_task_role.aws_iam_role_policy.task_role_policy","module.ecs_task_role.aws_iam_role_policy.task_s3_policy","module.ecs_task_role.aws_iam_role_policy.task_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.custom_ssm_policy_attachment","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_instance_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ssm_instance_policy","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route.private_nat_gateway","module.route_table.aws_route.public_internet_gateway","module.route_table.aws_route_table.private","module.route_table.aws_route_table.public","module.route_table.aws_route_table_association.private","module.route_table.aws_route_table_association.public","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"random_id.unique","mode":"managed","type":"random_id","name":"unique","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"gqWosg==","b64_url":"gqWosg","byte_length":4,"dec":"2191894706","hex":"82a5a8b2","id":"gqWosg","keepers":null,"prefix":null},"sensitive_values":{}},{"address":"tls_private_key.ssh_key","mode":"managed","type":"tls_private_key","name":"ssh_key","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":1,"values":{"algorithm":"RSA","ecdsa_curve":"P224","id":"40043ef7c68dca0d0713735ed73ee0e4961557d0","private_key_openssh":"-----BEGIN OPENSSH PRIVATE KEY-----\n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\n-----END OPENSSH PRIVATE KEY-----\n","private_key_pem":"-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\n","private_key_pem_pkcs8":"-----BEGIN PRIVATE KEY-----\n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\n1hMMFXN64d7XxLo1YcacCeVF7iznH/99YQ==\n-----END PRIVATE KEY-----\n","public_key_fingerprint_md5":"d6:bc:3c:02:2f:3e:ce:31:3f:90:ad:db:11:8e:4e:ac","public_key_fingerprint_sha256":"SHA256:cwkQlmVcgUnS8smrb19pYpKe/ppIByLG9bd1F/uDhZw","public_key_openssh":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDc/4j48g9FD9j0YdipsFQ+34IzQTafnd8liReWorO6HiWTKeZ2XyldbqHh8COGJt5gj9VMM48QKATxVByqS/XuYsLuzJesIrRLosl9aIdSTiVWAOfuWBKEtev34AhSe3/A0udIv5kXDdrCE5QXUHSlYYUKLwunqhicUaxqAShXLCPIDOza5ER4NdyVMIrtzHsdKUHisGX7NPTT3iaCsyrhrZFtGiwJ1KsdmgilEZ9FIT9I5aA8dYInGw679UytkZEEVcMGKeW/qixcmURoC/D4vo5A3dPZt/bdjMDDLhNZgOh9KFJFhqdcz08JNndT0y2nmdRqM2a5/NZGjlfUnJ6E0e4xPK8IuPC4SKO5MQaZdBM8OJoeID0IX4Kn33B+B5X1f8PbH7qvF9jDTFreQLh8Jg5ox8n4py53u3DfYJE5Vyeeoq32sr0jshRGw+lgPtxY8Rq6H5Cgaz3MyGpawSyZoSNfOjjISje2HnqrKxicMRzGWoNSubkTfAvlOS+3VV+caBBLYJLS4WDERGRzABPIKuzpZUfKcbnWqbx0rYw7bqYkelh1LuVZTjhhgMJ/+Y+2UsOSup/sWXDUgeOZK5J1BpjzqaIW8EKr7A3CF9RPU/7de02uEcq7+p+XOCb1f/xsR5w9LA0rP10XrhHP00kss2HfcEaM4FeV1yN4ldlKAw==\n","public_key_pem":"-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA3P+I+PIPRQ/Y9GHYqbBU\nPt+CM0E2n53fJYkXlqKzuh4lkynmdl8pXW6h4fAjhibeYI/VTDOPECgE8VQcqkv1\n7mLC7syXrCK0S6LJfWiHUk4lVgDn7lgShLXr9+AIUnt/wNLnSL+ZFw3awhOUF1B0\npWGFCi8Lp6oYnFGsagEoVywjyAzs2uREeDXclTCK7cx7HSlB4rBl+zT0094mgrMq\n4a2RbRosCdSrHZoIpRGfRSE/SOWgPHWCJxsOu/VMrZGRBFXDBinlv6osXJlEaAvw\n+L6OQN3T2bf23YzAwy4TWYDofShSRYanXM9PCTZ3U9Mtp5nUajNmufzWRo5X1Jye\nhNHuMTyvCLjwuEijuTEGmXQTPDiaHiA9CF+Cp99wfgeV9X/D2x+6rxfYw0xa3kC4\nfCYOaMfJ+Kcud7tw32CROVcnnqKt9rK9I7IURsPpYD7cWPEauh+QoGs9zMhqWsEs\nmaEjXzo4yEo3th56qysYnDEcxlqDUrm5E3wL5Tkvt1VfnGgQS2CS0uFgxERkcwAT\nyCrs6WVHynG51qm8dK2MO26mJHpYdS7lWU44YYDCf/mPtlLDkrqf7Flw1IHjmSuS\ndQaY86miFvBCq+wNwhfUT1P+3XtNrhHKu/qflzgm9X/8bEecPSwNKz9dF64Rz9NJ\nLLNh33BGjOBXldcjeJXZSgMCAwEAAQ==\n-----END PUBLIC KEY-----\n","rsa_bits":4096},"sensitive_values":{"private_key_openssh":true,"private_key_pem":true,"private_key_pem_pkcs8":true}}],"child_modules":[{"resources":[{"address":"module.alb.aws_autoscaling_attachment.asg_attachment","mode":"managed","type":"aws_autoscaling_attachment","name":"asg_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"autoscaling_group_name":"demo-asg-82a5a8b2-asg","elb":null,"id":"demo-asg-82a5a8b2-asg-20241231140404977900000021","lb_target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ec2-demo-alb-82a5a8b2-c7e6/cdb7fe75898b0781"},"sensitive_values":{},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_lb_target_group.ec2","module.alb.aws_security_group.http","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.alb.aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:loadbalancer/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12","arn_suffix":"app/demo-alb-82a5a8b2/fb7828d8a6aa2c12","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"demo-alb-82a5a8b2-60644634.us-east-1.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:loadbalancer/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","load_balancer_type":"application","name":"demo-alb-82a5a8b2","name_prefix":"","preserve_host_header":false,"security_groups":["sg-03227ddbd51f7f07d"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-04bd9aa18e82fd83e"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0e14e0a9592a6fad8"}],"subnets":["subnet-04bd9aa18e82fd83e","subnet-0e14e0a9592a6fad8"],"tags":{"Name":"demo-alb-82a5a8b2"},"tags_all":{"Name":"demo-alb-82a5a8b2"},"timeouts":{"create":"30m","delete":"30m","update":"30m"},"vpc_id":"vpc-057f028812bd7c22f","xff_header_processing_mode":"append","zone_id":"Z35SXDOTRQ7X7K"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{},"timeouts":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_listener.alb_ec2","mode":"managed","type":"aws_lb_listener","name":"alb_ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ec2-demo-alb-82a5a8b2-c7e6/cdb7fe75898b0781","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:loadbalancer/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12","mutual_authentication":[],"port":80,"protocol":"HTTP","ssl_policy":"","tags":null,"tags_all":{},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_lb.main","module.alb.aws_lb_target_group.ec2","module.alb.aws_security_group.http","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_listener_rule.nginx_ecs","mode":"managed","type":"aws_lb_listener_rule","name":"nginx_ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ecs-demo-alb-82a5a8b2-c7e6/9e8ddbe44bcdc2fe","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener-rule/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302/27b75b1202589754","condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/ecs/*"]}],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener-rule/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302/27b75b1202589754","listener_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302","priority":90,"tags":null,"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_security_group.http","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_listener_rule.nodejs_ecs","mode":"managed","type":"aws_lb_listener_rule","name":"nodejs_ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-nodejs-demo-alb-82a5a8b2-c7e6/142d4d7ea8f3b578","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener-rule/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302/12fee21ec202ffaa","condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/*"]}],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener-rule/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302/12fee21ec202ffaa","listener_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:listener/app/demo-alb-82a5a8b2/fb7828d8a6aa2c12/7c5efe6cfbacb302","priority":100,"tags":null,"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.http","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_target_group.ec2","mode":"managed","type":"aws_lb_target_group","name":"ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ec2-demo-alb-82a5a8b2-c7e6/cdb7fe75898b0781","arn_suffix":"targetgroup/tg-ec2-demo-alb-82a5a8b2-c7e6/cdb7fe75898b0781","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":60,"matcher":"200,301,302","path":"/","port":"traffic-port","protocol":"HTTP","timeout":30,"unhealthy_threshold":10}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ec2-demo-alb-82a5a8b2-c7e6/cdb7fe75898b0781","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"tg-ec2-demo-alb-82a5a8b2-c7e6","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":120,"cookie_name":"","enabled":true,"type":"lb_cookie"}],"tags":{"Name":"ec2-tg-demo-alb-82a5a8b2"},"tags_all":{"Name":"ec2-tg-demo-alb-82a5a8b2"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["data.aws_availability_zones.available","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_target_group.nginx_ecs","mode":"managed","type":"aws_lb_target_group","name":"nginx_ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ecs-demo-alb-82a5a8b2-c7e6/9e8ddbe44bcdc2fe","arn_suffix":"targetgroup/tg-ecs-demo-alb-82a5a8b2-c7e6/9e8ddbe44bcdc2fe","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ecs-demo-alb-82a5a8b2-c7e6/9e8ddbe44bcdc2fe","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"tg-ecs-demo-alb-82a5a8b2-c7e6","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":120,"cookie_name":"","enabled":true,"type":"lb_cookie"}],"tags":{"Name":"ecs-tg-nginxdemo-alb-82a5a8b2"},"tags_all":{"Name":"ecs-tg-nginxdemo-alb-82a5a8b2"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["data.aws_availability_zones.available","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_lb_target_group.nodejs_ecs","mode":"managed","type":"aws_lb_target_group","name":"nodejs_ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-nodejs-demo-alb-82a5a8b2-c7e6/142d4d7ea8f3b578","arn_suffix":"targetgroup/tg-nodejs-demo-alb-82a5a8b2-c7e6/142d4d7ea8f3b578","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200,301,302","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-nodejs-demo-alb-82a5a8b2-c7e6/142d4d7ea8f3b578","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"tg-nodejs-demo-alb-82a5a8b2-c7e6","name_prefix":"","port":3000,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":120,"cookie_name":"","enabled":true,"type":"lb_cookie"}],"tags":{"Name":"nodejs-ecs-tg-demo-alb-82a5a8b2"},"tags_all":{"Name":"nodejs-ecs-tg-demo-alb-82a5a8b2"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["data.aws_availability_zones.available","module.alb.random_id.target_group_suffix","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_security_group.ec2","mode":"managed","type":"aws_security_group","name":"ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-024b01834658e0dfb","description":"security_group for web server instance","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound internet traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":["10.0.2.0/24"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":["10.0.2.0/24"],"description":"Allow HTTP to private subnet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["10.0.2.0/24"],"description":"Allow SSH to private subnet","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"id":"sg-024b01834658e0dfb","ingress":[{"cidr_blocks":["10.0.2.0/24"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":["10.0.2.0/24"],"description":"Allow HTTP from private subnet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["10.0.2.0/24"],"description":"Allow SSH from private subnet","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":0},{"cidr_blocks":[],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":80}],"name":"http-sg-2024123114032268110000001d","name_prefix":"http-sg-","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"alb2ec2-sg-demo-alb-82a5a8b2"},"tags_all":{"Name":"alb2ec2-sg-demo-alb-82a5a8b2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_security_group.http","mode":"managed","type":"aws_security_group","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-03227ddbd51f7f07d","description":"Allow all HTTP/HTTPS traffic from public","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-03227ddbd51f7f07d","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"http-sg-20241231140318964800000019","name_prefix":"http-sg-","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"http-sg-demo-alb-82a5a8b2"},"tags_all":{"Name":"http-sg-demo-alb-82a5a8b2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_security_group.nginx_ecs_tasks","mode":"managed","type":"aws_security_group","name":"nginx_ecs_tasks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-0f8571b0fc3221e81","description":"Security group for ECS tasks","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0f8571b0fc3221e81","ingress":[{"cidr_blocks":[],"description":"","from_port":3000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":3000},{"cidr_blocks":[],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":80}],"name":"ecs-tasks-sg-2024123114032267140000001b","name_prefix":"ecs-tasks-sg-","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"ecs-tasks-sg-demo-alb-82a5a8b2"},"tags_all":{"Name":"ecs-tasks-sg-demo-alb-82a5a8b2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.aws_security_group.nodejs_ecs_tasks","mode":"managed","type":"aws_security_group","name":"nodejs_ecs_tasks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-09876fbb4ba7178f6","description":"Security group for nodejs ECS tasks","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-09876fbb4ba7178f6","ingress":[{"cidr_blocks":[],"description":"","from_port":3000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":3000}],"name":"nodejs-ecs-tasks-sg-2024123114032267030000001a","name_prefix":"nodejs-ecs-tasks-sg-","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"nodejs-ecs-tasks-sg-demo-alb-82a5a8b2"},"tags_all":{"Name":"nodejs-ecs-tasks-sg-demo-alb-82a5a8b2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.alb.random_id.target_group_suffix","mode":"managed","type":"random_id","name":"target_group_suffix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"x+Y=","b64_url":"x-Y","byte_length":2,"dec":"51174","hex":"c7e6","id":"x-Y","keepers":{"name_prefix":"demo-alb-82a5a8b2","port":"80","vpc_id":"vpc-057f028812bd7c22f"},"prefix":null},"sensitive_values":{"keepers":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.alb"},{"resources":[{"address":"module.backend.aws_dynamodb_table.terraform_locks","mode":"managed","type":"aws_dynamodb_table","name":"terraform_locks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:010575877879:table/demo-dev-locks","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"demo-dev-locks","import_table":[],"local_secondary_index":[],"name":"demo-dev-locks","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Name":"demo-dev-locks"},"tags_all":{"Name":"demo-dev-locks"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"module.backend.aws_s3_bucket.terraform_state","mode":"managed","type":"aws_s3_bucket","name":"terraform_state","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::dev-tfstate-0e982c82f3f4acdb","bucket":"dev-tfstate-0e982c82f3f4acdb","bucket_domain_name":"dev-tfstate-0e982c82f3f4acdb.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"dev-tfstate-0e982c82f3f4acdb.s3.us-east-1.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[{"id":"6af84428aeefa37ab06dd2ffd0b954bcabbb2bd55c4d76095ba4a6850a752c98","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"dev-tfstate-0e982c82f3f4acdb","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Environment":"dev","Project":"demo"},"tags_all":{"Environment":"dev","Project":"demo"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"depends_on":["module.backend.random_id.unique"]},{"address":"module.backend.aws_s3_bucket_lifecycle_configuration.terraform_state","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"terraform_state","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"dev-tfstate-0e982c82f3f4acdb","expected_bucket_owner":"","id":"dev-tfstate-0e982c82f3f4acdb","rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[{"date":"","days":0,"expired_object_delete_marker":true}],"filter":[{"and":[],"object_size_greater_than":"","object_size_less_than":"","prefix":"","tag":[]}],"id":"cleanup_old_versions","noncurrent_version_expiration":[{"newer_noncurrent_versions":"","noncurrent_days":1}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[]}]},"depends_on":["module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique"]},{"address":"module.backend.aws_s3_bucket_versioning.terraform_state","mode":"managed","type":"aws_s3_bucket_versioning","name":"terraform_state","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"dev-tfstate-0e982c82f3f4acdb","expected_bucket_owner":"","id":"dev-tfstate-0e982c82f3f4acdb","mfa":null,"versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]},"depends_on":["module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique"]},{"address":"module.backend.random_id.unique","mode":"managed","type":"random_id","name":"unique","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"DpgsgvP0rNs=","b64_url":"DpgsgvP0rNs","byte_length":8,"dec":"1051639453941279963","hex":"0e982c82f3f4acdb","id":"DpgsgvP0rNs","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.backend"},{"resources":[{"address":"module.ecs_asg.data.aws_autoscaling_group.ecs","mode":"data","type":"aws_autoscaling_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:010575877879:autoScalingGroup:36a1cbb3-2bd0-4321-9b38-634c1b622516:autoScalingGroupName/demo-asg-82a5a8b2-asg","availability_zones":["us-east-1a"],"default_cooldown":300,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"health_check_grace_period":10,"health_check_type":"EC2","id":"demo-asg-82a5a8b2-asg","instance_maintenance_policy":[],"launch_configuration":"","launch_template":[{"id":"lt-00f73589f228b6466","name":"launch_template","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"min_size":1,"mixed_instances_policy":[],"name":"demo-asg-82a5a8b2-asg","new_instances_protected_from_scale_in":true,"placement_group":"","predicted_capacity":0,"service_linked_role_arn":"arn:aws:iam::010575877879:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","status":"","suspended_processes":[],"tag":[{"key":"AmazonECSManaged","propagate_at_launch":true,"value":"true"},{"key":"Name","propagate_at_launch":true,"value":"demo-ecs-instance-82a5a8b2"},{"key":"Purpose","propagate_at_launch":true,"value":"ECS"},{"key":"Zone","propagate_at_launch":true,"value":"us-east-1a"}],"target_group_arns":[],"termination_policies":["Default"],"traffic_source":[],"vpc_zone_identifier":"subnet-0b2b0edf12a8178c6","warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"instance_maintenance_policy":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[{},{},{},{}],"target_group_arns":[],"termination_policies":[false],"traffic_source":[],"warm_pool":[]}},{"address":"module.ecs_asg.data.aws_autoscaling_group.lb","mode":"data","type":"aws_autoscaling_group","name":"lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:autoscaling:us-east-1:010575877879:autoScalingGroup:34b66c7b-61af-484e-9c7b-78c2a391dd35:autoScalingGroupName/demo-asg-82a5a8b2-asg-lb","availability_zones":["us-east-1b"],"default_cooldown":300,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"health_check_grace_period":10,"health_check_type":"EC2","id":"demo-asg-82a5a8b2-asg-lb","instance_maintenance_policy":[],"launch_configuration":"","launch_template":[{"id":"lt-00f73589f228b6466","name":"launch_template","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"min_size":1,"mixed_instances_policy":[],"name":"demo-asg-82a5a8b2-asg-lb","new_instances_protected_from_scale_in":false,"placement_group":"","predicted_capacity":0,"service_linked_role_arn":"arn:aws:iam::010575877879:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","status":"","suspended_processes":[],"tag":[{"key":"AmazonECSManaged","propagate_at_launch":true,"value":"false"},{"key":"Name","propagate_at_launch":true,"value":"demo-ecs-instance-82a5a8b2-lb"},{"key":"Purpose","propagate_at_launch":true,"value":"LoadBalancer"},{"key":"Zone","propagate_at_launch":true,"value":"us-east-1b"}],"target_group_arns":[],"termination_policies":["Default"],"traffic_source":[],"vpc_zone_identifier":"subnet-0da891b8774e4876e","warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"enabled_metrics":[],"instance_maintenance_policy":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[{},{},{},{}],"target_group_arns":[],"termination_policies":[false],"traffic_source":[],"warm_pool":[]}},{"address":"module.ecs_asg.data.aws_instances.ecs","mode":"data","type":"aws_instances","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"tag:aws:autoscaling:groupName","values":["demo-asg-82a5a8b2-asg"]}],"id":"us-east-1","ids":["i-09efae67b0acd89a1"],"instance_state_names":null,"instance_tags":null,"ipv6_addresses":[],"private_ips":["10.0.2.161"],"public_ips":[],"timeouts":null},"sensitive_values":{"filter":[{"values":[false]}],"ids":[false],"ipv6_addresses":[],"private_ips":[false],"public_ips":[]}},{"address":"module.ecs_asg.data.aws_instances.lb","mode":"data","type":"aws_instances","name":"lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"tag:aws:autoscaling:groupName","values":["demo-asg-82a5a8b2-asg-lb"]}],"id":"us-east-1","ids":["i-0ec28dc8780545662"],"instance_state_names":null,"instance_tags":null,"ipv6_addresses":[],"private_ips":["10.0.3.142"],"public_ips":[],"timeouts":null},"sensitive_values":{"filter":[{"values":[false]}],"ids":[false],"ipv6_addresses":[],"private_ips":[false],"public_ips":[]}},{"address":"module.ecs_asg.aws_autoscaling_group.ecs","mode":"managed","type":"aws_autoscaling_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:autoscaling:us-east-1:010575877879:autoScalingGroup:36a1cbb3-2bd0-4321-9b38-634c1b622516:autoScalingGroupName/demo-asg-82a5a8b2-asg","availability_zones":["us-east-1a"],"capacity_rebalance":true,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":10,"health_check_type":"EC2","id":"demo-asg-82a5a8b2-asg","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[{"default_result":"CONTINUE","heartbeat_timeout":300,"lifecycle_transition":"autoscaling:EC2_INSTANCE_TERMINATING","name":"terminate_hook","notification_metadata":"","notification_target_arn":"","role_arn":""}],"instance_maintenance_policy":[],"instance_refresh":[{"preferences":[{"alarm_specification":[],"auto_rollback":false,"checkpoint_delay":"","checkpoint_percentages":null,"instance_warmup":"300","max_healthy_percentage":100,"min_healthy_percentage":50,"scale_in_protected_instances":"Ignore","skip_matching":false,"standby_instances":"Ignore"}],"strategy":"Rolling","triggers":null}],"launch_configuration":"","launch_template":[{"id":"lt-00f73589f228b6466","name":"launch_template","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"name":"demo-asg-82a5a8b2-asg","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":true,"service_linked_role_arn":"arn:aws:iam::010575877879:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":null,"tag":[{"key":"AmazonECSManaged","propagate_at_launch":true,"value":"true"},{"key":"Name","propagate_at_launch":true,"value":"demo-ecs-instance-82a5a8b2"},{"key":"Purpose","propagate_at_launch":true,"value":"ECS"},{"key":"Zone","propagate_at_launch":true,"value":"us-east-1a"}],"target_group_arns":[],"termination_policies":null,"timeouts":null,"traffic_source":[],"vpc_zone_identifier":["subnet-0b2b0edf12a8178c6"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"initial_lifecycle_hook":[{}],"instance_maintenance_policy":[],"instance_refresh":[{"preferences":[{"alarm_specification":[]}]}],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[{},{},{},{}],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[false],"warm_pool":[]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_asg.aws_autoscaling_group.lb","mode":"managed","type":"aws_autoscaling_group","name":"lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:autoscaling:us-east-1:010575877879:autoScalingGroup:34b66c7b-61af-484e-9c7b-78c2a391dd35:autoScalingGroupName/demo-asg-82a5a8b2-asg-lb","availability_zones":["us-east-1b"],"capacity_rebalance":true,"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":10,"health_check_type":"EC2","id":"demo-asg-82a5a8b2-asg-lb","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[{"default_result":"CONTINUE","heartbeat_timeout":300,"lifecycle_transition":"autoscaling:EC2_INSTANCE_TERMINATING","name":"terminate_hook","notification_metadata":"","notification_target_arn":"","role_arn":""}],"instance_maintenance_policy":[],"instance_refresh":[{"preferences":[{"alarm_specification":[],"auto_rollback":false,"checkpoint_delay":"","checkpoint_percentages":null,"instance_warmup":"300","max_healthy_percentage":100,"min_healthy_percentage":50,"scale_in_protected_instances":"Ignore","skip_matching":false,"standby_instances":"Ignore"}],"strategy":"Rolling","triggers":null}],"launch_configuration":"","launch_template":[{"id":"lt-00f73589f228b6466","name":"launch_template","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"name":"demo-asg-82a5a8b2-asg-lb","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::010575877879:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":null,"tag":[{"key":"AmazonECSManaged","propagate_at_launch":true,"value":"false"},{"key":"Name","propagate_at_launch":true,"value":"demo-ecs-instance-82a5a8b2-lb"},{"key":"Purpose","propagate_at_launch":true,"value":"LoadBalancer"},{"key":"Zone","propagate_at_launch":true,"value":"us-east-1b"}],"target_group_arns":[],"termination_policies":null,"timeouts":null,"traffic_source":[],"vpc_zone_identifier":["subnet-0da891b8774e4876e"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zones":[false],"initial_lifecycle_hook":[{}],"instance_maintenance_policy":[],"instance_refresh":[{"preferences":[{"alarm_specification":[]}]}],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[{},{},{},{}],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[false],"warm_pool":[]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_asg"},{"resources":[{"address":"module.ecs_capacity_provider.aws_ecs_capacity_provider.main","mode":"managed","type":"aws_ecs_capacity_provider","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:us-east-1:010575877879:capacity-provider/demo-capacity-provider-82a5a8b2","auto_scaling_group_provider":[{"auto_scaling_group_arn":"arn:aws:autoscaling:us-east-1:010575877879:autoScalingGroup:36a1cbb3-2bd0-4321-9b38-634c1b622516:autoScalingGroupName/demo-asg-82a5a8b2-asg","managed_draining":"ENABLED","managed_scaling":[{"instance_warmup_period":0,"maximum_scaling_step_size":1,"minimum_scaling_step_size":1,"status":"ENABLED","target_capacity":100}],"managed_termination_protection":"DISABLED"}],"id":"arn:aws:ecs:us-east-1:010575877879:capacity-provider/demo-capacity-provider-82a5a8b2","name":"demo-capacity-provider-82a5a8b2","tags":null,"tags_all":{}},"sensitive_values":{"auto_scaling_group_provider":[{"managed_scaling":[{}]}],"tags_all":{}},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["demo-capacity-provider-82a5a8b2"],"cluster_name":"demo-cluster-82a5a8b2","default_capacity_provider_strategy":[{"base":1,"capacity_provider":"demo-capacity-provider-82a5a8b2","weight":100}],"id":"demo-cluster-82a5a8b2"},"sensitive_values":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_capacity_provider"},{"resources":[{"address":"module.ecs_cluster.aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:us-east-1:010575877879:cluster/demo-cluster-82a5a8b2","configuration":[],"id":"arn:aws:ecs:us-east-1:010575877879:cluster/demo-cluster-82a5a8b2","name":"demo-cluster-82a5a8b2","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":null,"tags_all":{}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.ecs_cluster"},{"resources":[{"address":"module.ecs_launch_template.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"user_data_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:010575877879:log-group:/var/log/user-data-logs","id":"/var/log/user-data-logs","kms_key_id":"","log_group_class":"STANDARD","name":"/var/log/user-data-logs","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}}},{"address":"module.ecs_launch_template.aws_launch_template.ecs_ec2","mode":"managed","type":"aws_launch_template","name":"ecs_ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:launch-template/lt-00f73589f228b6466","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":"arn:aws:iam::010575877879:instance-profile/ecs-instance-profile-2024123114030451320000000a","name":""}],"id":"lt-00f73589f228b6466","image_id":"ami-0448a709165fd89ff","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t2.micro","kernel_id":"","key_name":"ecs-instance-key-82a5a8b2","latest_version":1,"license_specification":[],"maintenance_options":[],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"","http_put_response_hop_limit":2,"http_tokens":"optional","instance_metadata_tags":""}],"monitoring":[],"name":"launch_template","name_prefix":"","network_interfaces":[{"associate_carrier_ip_address":"","associate_public_ip_address":"false","delete_on_termination":"","description":"","device_index":0,"interface_type":"","ipv4_address_count":0,"ipv4_addresses":null,"ipv4_prefix_count":0,"ipv4_prefixes":null,"ipv6_address_count":0,"ipv6_addresses":null,"ipv6_prefix_count":0,"ipv6_prefixes":null,"network_card_index":0,"network_interface_id":"","primary_ipv6":"","private_ip_address":"","security_groups":["sg-030921498d950b576"],"subnet_id":"subnet-0b2b0edf12a8178c6"}],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":null,"tag_specifications":[{"resource_type":"instance","tags":{"ECSCluster":"demo-cluster-82a5a8b2","Name":"ecs-instance-profile-2024123114030451320000000a-instance"}}],"tags":null,"tags_all":{},"update_default_version":null,"user_data":"IyEvYmluL2Jhc2gKc2V0IC1lCgpMT0dGSUxFPSIvdmFyL2xvZy9zc20tc2V0dXAubG9nIgp0b3VjaCAkTE9HRklMRQoKbG9nKCkgewogICAgZWNobyAiJChkYXRlICcrJVktJW0tJWQgJUg6JU06JVMnKSAtICQxIiB8IHRlZSAtYSAkTE9HRklMRQp9CgojIFdhaXQgZm9yIHN5c3RlbSBpbml0aWFsaXphdGlvbgpzbGVlcCAxNQoKIyBDb25maWd1cmUgRUNTIEFnZW50CmNhdCA+IC9ldGMvZWNzL2Vjcy5jb25maWcgPDwgJ0VDU0NPTkZJRycKRUNTX0NMVVNURVI9ZGVtby1jbHVzdGVyLTgyYTVhOGIyCkVDU19FTkdJTkVfQVVUSF9UWVBFPWRvY2tlcgpFQ1NfTE9HTEVWRUw9ZGVidWcKRUNTX1dBUk1fUE9PTFNfQ0hFQ0s9dHJ1ZQpFQ1NfQ09OVEFJTkVSX01FVEFEQVRBX1VSSV9WRVJTSU9OPXY0CkVDU19ET0NLRVJfQVBJX1ZFUlNJT049MS40NApFQ1NfRU5BQkxFX1RBU0tfTUVUQURBVEE9dHJ1ZQpFQ1NfQVZBSUxBQkxFX0xPR0dJTkdfRFJJVkVSUz1bImpzb24tZmlsZSIsImF3c2xvZ3MiXQpFQ1NfRU5BQkxFX01BTkFHRURfVEFHUz10cnVlCkVDU19FTkFCTEVfVEFHX1BST1BBR0FUSU9OPXRydWUKRUNTX0VOQUJMRV9DT05UQUlORVJfTUVUQURBVEE9dHJ1ZQpFQ1NfQ09OVEFJTkVSX01FVEFEQVRBX1VSST0vdjMvCkVDU19BV1NWUENfQkxPQ0tfSU1EUz1mYWxzZQpFQ1NfRU5BQkxFX1RBU0tfSUFNX1JPTEU9dHJ1ZQpFQ1NfRU5BQkxFX1RBU0tfRU5JPXRydWUKRUNTX0VOQUJMRV9TUE9UX0lOU1RBTkNFX0RSQUlOSU5HPXRydWUKRUNTX0VOQUJMRV9IRUFMVEhfTU9OSVRPUklORz10cnVlCkVDU19DT05UQUlORVJfTUVUQURBVEFfUE9MTF9JTlRFUlZBTD02MApFQ1NfU1RBVElDX0NPTlRBSU5FUl9QT1JUX01BUFBJTkc9dHJ1ZQpFQ1NfQ09OVEFJTkVSX0lOU1RBTkNFX1RBR1M9eyJlbnZpcm9ubWVudCI6InByb2QiLCJtYW5hZ2VkLWJ5IjoidGVycmFmb3JtIn0KRUNTX0VOQUJMRV9DT05UQUlORVJfSU5TVEFOQ0VfVEFHR0lORz10cnVlCkVDU19JTlNUQU5DRV9MT0NBTF9NRVRBREFUQV9QUk9WSURFUj10cnVlCkVDU0NPTkZJRwoKCiMgSW5zdGFsbCByZXF1aXJlZCBwYWNrYWdlcwpzdWRvIHl1bSBpbnN0YWxsIC15IHVuemlwCmN1cmwgImh0dHBzOi8vYXdzY2xpLmFtYXpvbmF3cy5jb20vYXdzY2xpLWV4ZS1saW51eC14ODZfNjQuemlwIiAtbyAiYXdzY2xpdjIuemlwIgp1bnppcCBhd3NjbGl2Mi56aXAKc3VkbyAuL2F3cy9pbnN0YWxsCnl1bSBpbnN0YWxsIC15IGFtYXpvbi1zc20tYWdlbnQgbmMganEKCiMgU3RhcnQgYW5kIGVuYWJsZSBTU00gQWdlbnQKc3lzdGVtY3RsIHN0YXJ0IGFtYXpvbi1zc20tYWdlbnQKc3lzdGVtY3RsIGVuYWJsZSBhbWF6b24tc3NtLWFnZW50CgojIENvbmZpZ3VyZSBTZXNzaW9uIE1hbmFnZXIgbG9nZ2luZwpta2RpciAtcCAvZXRjL2FtYXpvbi9zc20KY2F0ID4gL2V0Yy9hbWF6b24vc3NtL3NlZWxvZy54bWwgPDwgJ1NTTUNPTkZJRycKPHNlZWxvZyB0eXBlPSJhZGFwdGl2ZSIgbWluaW50ZXJ2YWw9IjIwMDAwMDAiIG1heGludGVydmFsPSIxMDAwMDAwMDAiIGNyaXRtc2djb3VudD0iNTAwIj4KICAgIDxleGNlcHRpb25zPgogICAgICAgIDxleGNlcHRpb24gZmlsZXBhdHRlcm49InRlc3QqIiBtaW5sZXZlbD0id2FybiIvPgogICAgPC9leGNlcHRpb25zPgogICAgPG91dHB1dHMgZm9ybWF0aWQ9ImZtdGluZm8iPgogICAgICAgIDxjb25zb2xlIGZvcm1hdGlkPSJmbXRpbmZvIi8+CiAgICAgICAgPHJvbGxpbmdmaWxlIHR5cGU9InNpemUiIGZpbGVuYW1lPSIvdmFyL2xvZy9hbWF6b24vc3NtL2FtYXpvbi1zc20tYWdlbnQubG9nIiBtYXhzaXplPSIzMDAwMDAwMCIgbWF4cm9sbHM9IjUiLz4KICAgIDwvb3V0cHV0cz4KICAgIDxmb3JtYXRzPgogICAgICAgIDxmb3JtYXQgaWQ9ImZtdGluZm8iIGZvcm1hdD0iJURhdGUgJVRpbWUgJUxFVkVMIFslRnVuY1Nob3J0IEAgJUZpbGUuJUxpbmVdICVNc2clbiIvPgogICAgPC9mb3JtYXRzPgo8L3NlZWxvZz4KU1NNQ09ORklHCgojIENvbmZpZ3VyZSBzaGVsbCBwcm9maWxlIGZvciBTZXNzaW9uIE1hbmFnZXIKY2F0ID4gL2V0Yy9hbWF6b24vc3NtL3NoZWxsLWNvbmZpZy5qc29uIDw8ICdTSEVMTENPTkZJRycKewogICAgImxpbnV4IjogewogICAgICAgICJjb21tYW5kcyI6IFsiYmFzaCJdLAogICAgICAgICJydW5Bc0VsZXZhdGVkIjogdHJ1ZSwKICAgICAgICAicnVuQXNFbmFibGVkIjogdHJ1ZSwKICAgICAgICAic2hlbGxQcm9maWxlIjogewogICAgICAgICAgICAibGludXgiOiAic291cmNlIH4vLmJhc2hyYyIKICAgICAgICB9CiAgICB9Cn0KU0hFTExDT05GSUcKCiMgUmVzdGFydCBTU00gQWdlbnQgdG8gYXBwbHkgY2hhbmdlcwpzeXN0ZW1jdGwgcmVzdGFydCBhbWF6b24tc3NtLWFnZW50CgojIFdhaXQgZm9yIFNTTSBBZ2VudCB0byBzdGFiaWxpemUKc2xlZXAgMzAKCnN1ZG8geXVtIGluc3RhbGwgbmFubyAteQoKIyBWZXJpZnkgU1NNIEFnZW50IHN0YXR1cwppZiBzeXN0ZW1jdGwgaXMtYWN0aXZlIGFtYXpvbi1zc20tYWdlbnQgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICBsb2cgIlNTTSBBZ2VudCBpcyBydW5uaW5nIHN1Y2Nlc3NmdWxseSIKZWxzZQogICAgbG9nICJFcnJvcjogU1NNIEFnZW50IGZhaWxlZCB0byBzdGFydCIKICAgIGV4aXQgMQpmaQoKbG9nICJTZXR1cCBjb21wbGV0ZS4gVmVyaWZ5IGZ1bGwgY29uZmlndXJhdGlvbiBpbiAkTE9HRklMRSIK","vpc_security_group_ids":null},"sensitive_values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[{}],"monitoring":[],"network_interfaces":[{"security_groups":[false]}],"placement":[],"private_dns_name_options":[],"tag_specifications":[{"tags":{}}],"tags_all":{}},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_launch_template"},{"resources":[{"address":"module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","mode":"data","type":"aws_iam_policy_document","name":"ecs_node_doc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1895348101","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": [\n          \"ecs-tasks.amazonaws.com\",\n          \"ec2.amazonaws.com\"\n        ]\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":[\"ecs-tasks.amazonaws.com\",\"ec2.amazonaws.com\"]}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com","ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false,false]}],"resources":[]}]}},{"address":"module.ecs_node_role.data.aws_iam_policy_document.ecs_node_permissions","mode":"data","type":"aws_iam_policy_document","name":"ecs_node_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"937695128","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssmmessages:OpenDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:CreateControlChannel\",\n        \"ssm:UpdateServiceSetting\",\n        \"ssm:UpdateManagedInstanceRole\",\n        \"ssm:UpdateInstanceInformation\",\n        \"ssm:UpdateInstanceAssociationStatus\",\n        \"ssm:UpdateAssociation\",\n        \"ssm:TerminateSession\",\n        \"ssm:StartSession\",\n        \"ssm:SendCommand\",\n        \"ssm:ResumeSession\",\n        \"ssm:ResetServiceSetting\",\n        \"ssm:RemoveTagsFromResource\",\n        \"ssm:PutParameter\",\n        \"ssm:ListTagsForResource\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:ListDocuments\",\n        \"ssm:ListDocumentVersions\",\n        \"ssm:ListCommands\",\n        \"ssm:ListCommandInvocations\",\n        \"ssm:ListAssociations\",\n        \"ssm:LabelParameterVersion\",\n        \"ssm:GetServiceSetting\",\n        \"ssm:GetPatchBaseline\",\n        \"ssm:GetParametersByPath\",\n        \"ssm:GetParameters\",\n        \"ssm:GetParameterHistory\",\n        \"ssm:GetParameter\",\n        \"ssm:GetDocument\",\n        \"ssm:GetDefaultPatchBaseline\",\n        \"ssm:GetConnectionStatus\",\n        \"ssm:GetCommandInvocation\",\n        \"ssm:GetActivations\",\n        \"ssm:DescribeSessions\",\n        \"ssm:DescribePatchBaselines\",\n        \"ssm:DescribeParameters\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:DescribeInstancePatches\",\n        \"ssm:DescribeInstancePatchStates\",\n        \"ssm:DescribeInstanceInformation\",\n        \"ssm:DescribeInstanceAssociations\",\n        \"ssm:DescribeDocumentParameters\",\n        \"ssm:DescribeDocument\",\n        \"ssm:DeleteParameters\",\n        \"ssm:DeleteParameter\",\n        \"ssm:DeleteAssociation\",\n        \"ssm:DeleteActivation\",\n        \"ssm:CreateAssociation\",\n        \"ssm:CreateActivation\",\n        \"ssm:CancelCommand\",\n        \"ssm:AddTagsToResource\",\n        \"servicediscovery:DiscoverInstances\",\n        \"secretsmanager:GetSecretValue\",\n        \"secretsmanager:DescribeSecret\",\n        \"logs:PutRetentionPolicy\",\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\",\n        \"kms:GenerateDataKey\",\n        \"kms:Decrypt\",\n        \"iam:PassRole\",\n        \"iam:ListRolePolicies\",\n        \"iam:ListAttachedRolePolicies\",\n        \"iam:GetRole\",\n        \"ecs:UpdateService\",\n        \"ecs:UpdateContainerInstancesState\",\n        \"ecs:UpdateContainerAgent\",\n        \"ecs:Submit*\",\n        \"ecs:StopTask\",\n        \"ecs:StartTelemetrySession\",\n        \"ecs:StartTask\",\n        \"ecs:RunTask\",\n        \"ecs:RegisterTaskDefinition\",\n        \"ecs:RegisterContainerInstance\",\n        \"ecs:Poll\",\n        \"ecs:ListTasks\",\n        \"ecs:ListTaskDefinitions\",\n        \"ecs:ListContainerInstances\",\n        \"ecs:ListClusters\",\n        \"ecs:DiscoverPollEndpoint\",\n        \"ecs:DescribeTasks\",\n        \"ecs:DescribeTaskDefinition\",\n        \"ecs:DescribeServices\",\n        \"ecs:DescribeContainerInstances\",\n        \"ecs:DescribeClusters\",\n        \"ecs:DeregisterContainerInstance\",\n        \"ecs:DeleteCluster\",\n        \"ecs:CreateCluster\",\n        \"ecr:UploadLayerPart\",\n        \"ecr:PutImage\",\n        \"ecr:ListImages\",\n        \"ecr:InitiateLayerUpload\",\n        \"ecr:GetRepositoryPolicy\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:GetAuthorizationToken\",\n        \"ecr:DescribeRepositories\",\n        \"ecr:DescribeImages\",\n        \"ecr:CompleteLayerUpload\",\n        \"ecr:BatchGetImage\",\n        \"ecr:BatchCheckLayerAvailability\",\n        \"ec2:ReleaseAddress\",\n        \"ec2:ModifyNetworkInterfaceAttribute\",\n        \"ec2:DisassociateAddress\",\n        \"ec2:DetachVolume\",\n        \"ec2:DetachNetworkInterface\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DescribeTags\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeAddresses\",\n        \"ec2:DeleteNetworkInterface\",\n        \"ec2:CreateTags\",\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:AttachVolume\",\n        \"ec2:AttachNetworkInterface\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"ssmmessages:OpenDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:CreateControlChannel\",\"ssm:UpdateServiceSetting\",\"ssm:UpdateManagedInstanceRole\",\"ssm:UpdateInstanceInformation\",\"ssm:UpdateInstanceAssociationStatus\",\"ssm:UpdateAssociation\",\"ssm:TerminateSession\",\"ssm:StartSession\",\"ssm:SendCommand\",\"ssm:ResumeSession\",\"ssm:ResetServiceSetting\",\"ssm:RemoveTagsFromResource\",\"ssm:PutParameter\",\"ssm:ListTagsForResource\",\"ssm:ListInstanceAssociations\",\"ssm:ListDocuments\",\"ssm:ListDocumentVersions\",\"ssm:ListCommands\",\"ssm:ListCommandInvocations\",\"ssm:ListAssociations\",\"ssm:LabelParameterVersion\",\"ssm:GetServiceSetting\",\"ssm:GetPatchBaseline\",\"ssm:GetParametersByPath\",\"ssm:GetParameters\",\"ssm:GetParameterHistory\",\"ssm:GetParameter\",\"ssm:GetDocument\",\"ssm:GetDefaultPatchBaseline\",\"ssm:GetConnectionStatus\",\"ssm:GetCommandInvocation\",\"ssm:GetActivations\",\"ssm:DescribeSessions\",\"ssm:DescribePatchBaselines\",\"ssm:DescribeParameters\",\"ssm:DescribeInstanceProperties\",\"ssm:DescribeInstancePatches\",\"ssm:DescribeInstancePatchStates\",\"ssm:DescribeInstanceInformation\",\"ssm:DescribeInstanceAssociations\",\"ssm:DescribeDocumentParameters\",\"ssm:DescribeDocument\",\"ssm:DeleteParameters\",\"ssm:DeleteParameter\",\"ssm:DeleteAssociation\",\"ssm:DeleteActivation\",\"ssm:CreateAssociation\",\"ssm:CreateActivation\",\"ssm:CancelCommand\",\"ssm:AddTagsToResource\",\"servicediscovery:DiscoverInstances\",\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\",\"logs:PutRetentionPolicy\",\"logs:PutLogEvents\",\"logs:DescribeLogStreams\",\"logs:DescribeLogGroups\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"kms:GenerateDataKey\",\"kms:Decrypt\",\"iam:PassRole\",\"iam:ListRolePolicies\",\"iam:ListAttachedRolePolicies\",\"iam:GetRole\",\"ecs:UpdateService\",\"ecs:UpdateContainerInstancesState\",\"ecs:UpdateContainerAgent\",\"ecs:Submit*\",\"ecs:StopTask\",\"ecs:StartTelemetrySession\",\"ecs:StartTask\",\"ecs:RunTask\",\"ecs:RegisterTaskDefinition\",\"ecs:RegisterContainerInstance\",\"ecs:Poll\",\"ecs:ListTasks\",\"ecs:ListTaskDefinitions\",\"ecs:ListContainerInstances\",\"ecs:ListClusters\",\"ecs:DiscoverPollEndpoint\",\"ecs:DescribeTasks\",\"ecs:DescribeTaskDefinition\",\"ecs:DescribeServices\",\"ecs:DescribeContainerInstances\",\"ecs:DescribeClusters\",\"ecs:DeregisterContainerInstance\",\"ecs:DeleteCluster\",\"ecs:CreateCluster\",\"ecr:UploadLayerPart\",\"ecr:PutImage\",\"ecr:ListImages\",\"ecr:InitiateLayerUpload\",\"ecr:GetRepositoryPolicy\",\"ecr:GetDownloadUrlForLayer\",\"ecr:GetAuthorizationToken\",\"ecr:DescribeRepositories\",\"ecr:DescribeImages\",\"ecr:CompleteLayerUpload\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ec2:ReleaseAddress\",\"ec2:ModifyNetworkInterfaceAttribute\",\"ec2:DisassociateAddress\",\"ec2:DetachVolume\",\"ec2:DetachNetworkInterface\",\"ec2:DescribeVolumes\",\"ec2:DescribeTags\",\"ec2:DescribeNetworkInterfaces\",\"ec2:DescribeInstances\",\"ec2:DescribeAddresses\",\"ec2:DeleteNetworkInterface\",\"ec2:CreateTags\",\"ec2:CreateNetworkInterface\",\"ec2:AttachVolume\",\"ec2:AttachNetworkInterface\"],\"Resource\":\"*\"}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:AttachNetworkInterface","ec2:AttachVolume","ec2:CreateNetworkInterface","ec2:CreateTags","ec2:DeleteNetworkInterface","ec2:DescribeAddresses","ec2:DescribeInstances","ec2:DescribeNetworkInterfaces","ec2:DescribeTags","ec2:DescribeVolumes","ec2:DetachNetworkInterface","ec2:DetachVolume","ec2:DisassociateAddress","ec2:ModifyNetworkInterfaceAttribute","ec2:ReleaseAddress","ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:CompleteLayerUpload","ecr:DescribeImages","ecr:DescribeRepositories","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer","ecr:GetRepositoryPolicy","ecr:InitiateLayerUpload","ecr:ListImages","ecr:PutImage","ecr:UploadLayerPart","ecs:CreateCluster","ecs:DeleteCluster","ecs:DeregisterContainerInstance","ecs:DescribeClusters","ecs:DescribeContainerInstances","ecs:DescribeServices","ecs:DescribeTaskDefinition","ecs:DescribeTasks","ecs:DiscoverPollEndpoint","ecs:ListClusters","ecs:ListContainerInstances","ecs:ListTaskDefinitions","ecs:ListTasks","ecs:Poll","ecs:RegisterContainerInstance","ecs:RegisterTaskDefinition","ecs:RunTask","ecs:StartTask","ecs:StartTelemetrySession","ecs:StopTask","ecs:Submit*","ecs:UpdateContainerAgent","ecs:UpdateContainerInstancesState","ecs:UpdateService","iam:GetRole","iam:ListAttachedRolePolicies","iam:ListRolePolicies","iam:PassRole","kms:Decrypt","kms:GenerateDataKey","logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:PutLogEvents","logs:PutRetentionPolicy","secretsmanager:DescribeSecret","secretsmanager:GetSecretValue","servicediscovery:DiscoverInstances","ssm:AddTagsToResource","ssm:CancelCommand","ssm:CreateActivation","ssm:CreateAssociation","ssm:DeleteActivation","ssm:DeleteAssociation","ssm:DeleteParameter","ssm:DeleteParameters","ssm:DescribeDocument","ssm:DescribeDocumentParameters","ssm:DescribeInstanceAssociations","ssm:DescribeInstanceInformation","ssm:DescribeInstancePatchStates","ssm:DescribeInstancePatches","ssm:DescribeInstanceProperties","ssm:DescribeParameters","ssm:DescribePatchBaselines","ssm:DescribeSessions","ssm:GetActivations","ssm:GetCommandInvocation","ssm:GetConnectionStatus","ssm:GetDefaultPatchBaseline","ssm:GetDocument","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters","ssm:GetParametersByPath","ssm:GetPatchBaseline","ssm:GetServiceSetting","ssm:LabelParameterVersion","ssm:ListAssociations","ssm:ListCommandInvocations","ssm:ListCommands","ssm:ListDocumentVersions","ssm:ListDocuments","ssm:ListInstanceAssociations","ssm:ListTagsForResource","ssm:PutParameter","ssm:RemoveTagsFromResource","ssm:ResetServiceSetting","ssm:ResumeSession","ssm:SendCommand","ssm:StartSession","ssm:TerminateSession","ssm:UpdateAssociation","ssm:UpdateInstanceAssociationStatus","ssm:UpdateInstanceInformation","ssm:UpdateManagedInstanceRole","ssm:UpdateServiceSetting","ssmmessages:CreateControlChannel","ssmmessages:CreateDataChannel","ssmmessages:OpenControlChannel","ssmmessages:OpenDataChannel"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.ecs_node_role.data.aws_iam_policy_document.ecs_node_role_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_node_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2861722153","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssm:UpdateInstanceInformation\",\n        \"ssm:TerminateSession\",\n        \"ssm:StartSession\",\n        \"ssm:ResumeSession\",\n        \"ssm:ListInstanceAssociations\",\n        \"ssm:DescribeInstanceProperties\",\n        \"ssm:DescribeDocumentParameters\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssmmessages:OpenDataChannel\",\n        \"ssmmessages:OpenControlChannel\",\n        \"ssmmessages:CreateDataChannel\",\n        \"ssmmessages:CreateControlChannel\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2messages:SendReply\",\n        \"ec2messages:GetMessages\",\n        \"ec2messages:GetEndpoint\",\n        \"ec2messages:FailMessage\",\n        \"ec2messages:DeleteMessage\",\n        \"ec2messages:AcknowledgeMessage\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"ssm:UpdateInstanceInformation\",\"ssm:TerminateSession\",\"ssm:StartSession\",\"ssm:ResumeSession\",\"ssm:ListInstanceAssociations\",\"ssm:DescribeInstanceProperties\",\"ssm:DescribeDocumentParameters\"],\"Resource\":\"*\"},{\"Effect\":\"Allow\",\"Action\":[\"ssmmessages:OpenDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:CreateControlChannel\"],\"Resource\":\"*\"},{\"Effect\":\"Allow\",\"Action\":[\"ec2messages:SendReply\",\"ec2messages:GetMessages\",\"ec2messages:GetEndpoint\",\"ec2messages:FailMessage\",\"ec2messages:DeleteMessage\",\"ec2messages:AcknowledgeMessage\"],\"Resource\":\"*\"}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ssm:DescribeDocumentParameters","ssm:DescribeInstanceProperties","ssm:ListInstanceAssociations","ssm:ResumeSession","ssm:StartSession","ssm:TerminateSession","ssm:UpdateInstanceInformation"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""},{"actions":["ssmmessages:CreateControlChannel","ssmmessages:CreateDataChannel","ssmmessages:OpenControlChannel","ssmmessages:OpenDataChannel"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""},{"actions":["ec2messages:AcknowledgeMessage","ec2messages:DeleteMessage","ec2messages:FailMessage","ec2messages:GetEndpoint","ec2messages:GetMessages","ec2messages:SendReply"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.ecs_node_role.data.aws_iam_policy_document.full_access","mode":"data","type":"aws_iam_policy_document","name":"full_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3847708362","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssm:*\",\n        \"logs:*\",\n        \"iam:PassRole\",\n        \"iam:ListRolePolicies\",\n        \"iam:ListAttachedRolePolicies\",\n        \"iam:GetRole\",\n        \"ecs:*\",\n        \"ecr:*\",\n        \"ec2:*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:ReleaseAddress\",\n        \"ec2:DescribeAddresses\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"ssm:*\",\"logs:*\",\"iam:PassRole\",\"iam:ListRolePolicies\",\"iam:ListAttachedRolePolicies\",\"iam:GetRole\",\"ecs:*\",\"ecr:*\",\"ec2:*\"],\"Resource\":\"*\"},{\"Effect\":\"Allow\",\"Action\":[\"ec2:ReleaseAddress\",\"ec2:DescribeAddresses\"],\"Resource\":\"*\"}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:*","ecr:*","ecs:*","iam:GetRole","iam:ListAttachedRolePolicies","iam:ListRolePolicies","iam:PassRole","logs:*","ssm:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:DescribeAddresses","ec2:ReleaseAddress"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.ecs_node_role.aws_iam_instance_profile.ecs_node","mode":"managed","type":"aws_iam_instance_profile","name":"ecs_node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:instance-profile/ecs/instance/demo-ecs-node-profile-82a5a8b220241231140304471300000009","create_date":"2024-12-31T14:03:04Z","id":"demo-ecs-node-profile-82a5a8b220241231140304471300000009","name":"demo-ecs-node-profile-82a5a8b220241231140304471300000009","name_prefix":"demo-ecs-node-profile-82a5a8b2","path":"/ecs/instance/","role":"demo-ecs-node-role-82a5a8b220241231140302606300000001","tags":null,"tags_all":{},"unique_id":"AIPAQE5S7C33YODDJJ72B"},"sensitive_values":{"tags_all":{}},"depends_on":["module.ecs_node_role.aws_iam_role.ecs_node_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_policy.ecs_combined_permissions","mode":"managed","type":"aws_iam_policy","name":"ecs_combined_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-comb20241231140302606300000002","attachment_count":0,"description":"Combined permissions for ECS node and execution roles","id":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-comb20241231140302606300000002","name":"demo-ecs-node-role-82a5a8b2-comb20241231140302606300000002","name_prefix":"demo-ecs-node-role-82a5a8b2-comb","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ssmmessages:OpenDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:CreateControlChannel\",\"ssm:UpdateServiceSetting\",\"ssm:UpdateManagedInstanceRole\",\"ssm:UpdateInstanceInformation\",\"ssm:UpdateInstanceAssociationStatus\",\"ssm:UpdateAssociation\",\"ssm:TerminateSession\",\"ssm:StartSession\",\"ssm:SendCommand\",\"ssm:ResumeSession\",\"ssm:ResetServiceSetting\",\"ssm:RemoveTagsFromResource\",\"ssm:PutParameter\",\"ssm:ListTagsForResource\",\"ssm:ListInstanceAssociations\",\"ssm:ListDocuments\",\"ssm:ListDocumentVersions\",\"ssm:ListCommands\",\"ssm:ListCommandInvocations\",\"ssm:ListAssociations\",\"ssm:LabelParameterVersion\",\"ssm:GetServiceSetting\",\"ssm:GetPatchBaseline\",\"ssm:GetParametersByPath\",\"ssm:GetParameters\",\"ssm:GetParameterHistory\",\"ssm:GetParameter\",\"ssm:GetDocument\",\"ssm:GetDefaultPatchBaseline\",\"ssm:GetConnectionStatus\",\"ssm:GetCommandInvocation\",\"ssm:GetActivations\",\"ssm:DescribeSessions\",\"ssm:DescribePatchBaselines\",\"ssm:DescribeParameters\",\"ssm:DescribeInstanceProperties\",\"ssm:DescribeInstancePatches\",\"ssm:DescribeInstancePatchStates\",\"ssm:DescribeInstanceInformation\",\"ssm:DescribeInstanceAssociations\",\"ssm:DescribeDocumentParameters\",\"ssm:DescribeDocument\",\"ssm:DeleteParameters\",\"ssm:DeleteParameter\",\"ssm:DeleteAssociation\",\"ssm:DeleteActivation\",\"ssm:CreateAssociation\",\"ssm:CreateActivation\",\"ssm:CancelCommand\",\"ssm:AddTagsToResource\",\"servicediscovery:DiscoverInstances\",\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\",\"logs:PutRetentionPolicy\",\"logs:PutLogEvents\",\"logs:DescribeLogStreams\",\"logs:DescribeLogGroups\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"kms:GenerateDataKey\",\"kms:Decrypt\",\"iam:PassRole\",\"iam:ListRolePolicies\",\"iam:ListAttachedRolePolicies\",\"iam:GetRole\",\"ecs:UpdateService\",\"ecs:UpdateContainerInstancesState\",\"ecs:UpdateContainerAgent\",\"ecs:Submit*\",\"ecs:StopTask\",\"ecs:StartTelemetrySession\",\"ecs:StartTask\",\"ecs:RunTask\",\"ecs:RegisterTaskDefinition\",\"ecs:RegisterContainerInstance\",\"ecs:Poll\",\"ecs:ListTasks\",\"ecs:ListTaskDefinitions\",\"ecs:ListContainerInstances\",\"ecs:ListClusters\",\"ecs:DiscoverPollEndpoint\",\"ecs:DescribeTasks\",\"ecs:DescribeTaskDefinition\",\"ecs:DescribeServices\",\"ecs:DescribeContainerInstances\",\"ecs:DescribeClusters\",\"ecs:DeregisterContainerInstance\",\"ecs:DeleteCluster\",\"ecs:CreateCluster\",\"ecr:UploadLayerPart\",\"ecr:PutImage\",\"ecr:ListImages\",\"ecr:InitiateLayerUpload\",\"ecr:GetRepositoryPolicy\",\"ecr:GetDownloadUrlForLayer\",\"ecr:GetAuthorizationToken\",\"ecr:DescribeRepositories\",\"ecr:DescribeImages\",\"ecr:CompleteLayerUpload\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ec2:ReleaseAddress\",\"ec2:ModifyNetworkInterfaceAttribute\",\"ec2:DisassociateAddress\",\"ec2:DetachVolume\",\"ec2:DetachNetworkInterface\",\"ec2:DescribeVolumes\",\"ec2:DescribeTags\",\"ec2:DescribeNetworkInterfaces\",\"ec2:DescribeInstances\",\"ec2:DescribeAddresses\",\"ec2:DeleteNetworkInterface\",\"ec2:CreateTags\",\"ec2:CreateNetworkInterface\",\"ec2:AttachVolume\",\"ec2:AttachNetworkInterface\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQE5S7C33WJF5H5ZHY","tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}},"depends_on":["module.ecs_node_role.data.aws_iam_policy_document.ecs_node_permissions","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_policy.full_access","mode":"managed","type":"aws_iam_policy","name":"full_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","attachment_count":0,"description":"Full access policy","id":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","name":"demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","name_prefix":"demo-ecs-node-role-82a5a8b2-full","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ssm:*\",\"logs:*\",\"iam:PassRole\",\"iam:ListRolePolicies\",\"iam:ListAttachedRolePolicies\",\"iam:GetRole\",\"ecs:*\",\"ecr:*\",\"ec2:*\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ec2:ReleaseAddress\",\"ec2:DescribeAddresses\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQE5S7C33UYWRISNE4","tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}},"depends_on":["module.ecs_node_role.data.aws_iam_policy_document.full_access","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role.ecs_exec_role","mode":"managed","type":"aws_iam_role","name":"ecs_exec_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:role/demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-12-31T14:03:03Z","description":"","force_detach_policies":true,"id":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003","name_prefix":"demo-ecs-node-role-82a5a8b2-exec","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAQE5S7C33VH7IMV727"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"depends_on":["random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role.ecs_node_role","mode":"managed","type":"aws_iam_role","name":"ecs_node_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:role/demo-ecs-node-role-82a5a8b220241231140302606300000001","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"ecs-tasks.amazonaws.com\",\"ec2.amazonaws.com\"]}}],\"Version\":\"2012-10-17\"}","create_date":"2024-12-31T14:03:03Z","description":"","force_detach_policies":false,"id":"demo-ecs-node-role-82a5a8b220241231140302606300000001","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"demo-ecs-node-role-82a5a8b220241231140302606300000001","name_prefix":"demo-ecs-node-role-82a5a8b2","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAQE5S7C33ZIC3IBCTT"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"depends_on":["module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_cloudwatch_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_cloudwatch_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b220241231140302606300000001-20241231140304192800000008","policy_arn":"arn:aws:iam::aws:policy/CloudWatchLogsFullAccess","role":"demo-ecs-node-role-82a5a8b220241231140302606300000001"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_role.ecs_node_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_exec_cloudwatch_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_exec_cloudwatch_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003-20241231140305460600000011","policy_arn":"arn:aws:iam::aws:policy/CloudWatchLogsFullAccess","role":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_exec_combined_permissions","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_exec_combined_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003-2024123114030541710000000f","policy_arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-comb20241231140302606300000002","role":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_policy.ecs_combined_permissions","module.ecs_node_role.aws_iam_role.ecs_exec_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_permissions","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_exec_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003-20241231140305435500000010","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_node_combined_permissions","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_node_combined_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b220241231140302606300000001-2024123114030454520000000b","policy_arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-comb20241231140302606300000002","role":"demo-ecs-node-role-82a5a8b220241231140302606300000001"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_policy.ecs_combined_permissions","module.ecs_node_role.aws_iam_role.ecs_node_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_permissions","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.ecs_node_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_node_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b220241231140302606300000001-2024123114030461000000000c","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role","role":"demo-ecs-node-role-82a5a8b220241231140302606300000001"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_role.ecs_node_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.full_access_exec","mode":"managed","type":"aws_iam_role_policy_attachment","name":"full_access_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003-20241231140307068100000013","policy_arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","role":"demo-ecs-node-role-82a5a8b2-exec20241231140302606400000003"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_policy.full_access","module.ecs_node_role.aws_iam_role.ecs_exec_role","module.ecs_node_role.data.aws_iam_policy_document.full_access","random_id.unique"]},{"address":"module.ecs_node_role.aws_iam_role_policy_attachment.full_access_node","mode":"managed","type":"aws_iam_role_policy_attachment","name":"full_access_node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-node-role-82a5a8b220241231140302606300000001-20241231140307288200000014","policy_arn":"arn:aws:iam::010575877879:policy/demo-ecs-node-role-82a5a8b2-full20241231140303900100000007","role":"demo-ecs-node-role-82a5a8b220241231140302606300000001"},"sensitive_values":{},"depends_on":["module.ecs_node_role.aws_iam_policy.full_access","module.ecs_node_role.aws_iam_role.ecs_node_role","module.ecs_node_role.data.aws_iam_policy_document.ecs_node_doc","module.ecs_node_role.data.aws_iam_policy_document.full_access","random_id.unique"]}],"address":"module.ecs_node_role"},{"resources":[{"address":"module.ecs_node_sg.data.aws_vpc.selected","mode":"data","type":"aws_vpc","name":"selected","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:vpc/vpc-057f028812bd7c22f","cidr_block":"10.0.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-0d694bcf633d147fb","cidr_block":"10.0.0.0/16","state":"associated"}],"default":false,"dhcp_options_id":"dopt-06d2655013d8d60c3","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"filter":null,"id":"vpc-057f028812bd7c22f","instance_tenancy":"default","ipv6_association_id":"","ipv6_cidr_block":"","main_route_table_id":"rtb-0a282fd4841dc236f","owner_id":"010575877879","state":null,"tags":{"Name":"demo-vpc-82a5a8b2"},"timeouts":null},"sensitive_values":{"cidr_block_associations":[{}],"tags":{}}},{"address":"module.ecs_node_sg.aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-07d73787935e7fe56","description":"Security group for ALB in public subnet","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-07d73787935e7fe56","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTP inbound","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allow HTTPS inbound","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"demo-ecs-sg-82a5a8b2-alb20241231140316637500000018","name_prefix":"demo-ecs-sg-82a5a8b2-alb","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"demo-ecs-sg-82a5a8b2-alb-sg"},"tags_all":{"Name":"demo-ecs-sg-82a5a8b2-alb-sg"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.ecs_node_sg.aws_security_group.ecs_node_sg","mode":"managed","type":"aws_security_group","name":"ecs_node_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-030921498d950b576","description":"Security group for ECS nodes in private subnet","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic via NAT Gateway","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-030921498d950b576","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow all internal VPC traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":65535},{"cidr_blocks":["10.0.0.0/16"],"description":"Allow ephemeral ports for ECS tasks","from_port":32768,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":65535},{"cidr_blocks":[],"description":"Allow all inbound traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03227ddbd51f7f07d"],"self":false,"to_port":65535}],"name":"demo-ecs-sg-82a5a8b22024123114032267980000001c","name_prefix":"demo-ecs-sg-82a5a8b2","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"demo-ecs-sg-82a5a8b2-ecs-private-sg"},"tags_all":{"Name":"demo-ecs-sg-82a5a8b2-ecs-private-sg"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_node_sg.data.aws_vpc.selected","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.ecs_node_sg.aws_security_group_rule.container_communication","mode":"managed","type":"aws_security_group_rule","name":"container_communication","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow container-to-container communication","from_port":0,"id":"sgrule-552665057","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-030921498d950b576","security_group_rule_id":"sgr-0a829a52324f350ae","self":false,"source_security_group_id":"sg-030921498d950b576","timeouts":null,"to_port":65535,"type":"ingress"},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.alb.aws_security_group.http","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.ecs_node_sg"},{"resources":[{"address":"module.ecs_service.aws_ecs_service.app","mode":"managed","type":"aws_ecs_service","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":1,"capacity_provider":"demo-capacity-provider-82a5a8b2","weight":100}],"cluster":"arn:aws:ecs:us-east-1:010575877879:cluster/demo-cluster-82a5a8b2","deployment_circuit_breaker":[{"enable":true,"rollback":true}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":true,"health_check_grace_period_seconds":150,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:us-east-1:010575877879:service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2","launch_type":"","load_balancer":[{"container_name":"my-container-nginx","container_port":80,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-ecs-demo-alb-82a5a8b2-c7e6/9e8ddbe44bcdc2fe"}],"name":"demo-ecs-Nservice-82a5a8b2","network_configuration":[],"ordered_placement_strategy":[{"field":"attribute:ecs.availability-zone","type":"spread"},{"field":"instanceId","type":"spread"}],"placement_constraints":[],"platform_version":"","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"tags_all":{},"task_definition":"arn:aws:ecs:us-east-1:010575877879:task-definition/nginx-task-82a5a8b2:1","timeouts":{"create":"30m","delete":"30m","update":"30m"},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":true},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[],"ordered_placement_strategy":[{},{}],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"timeouts":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","mode":"managed","type":"aws_security_group_rule","name":"allow_alb_to_ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow ALB to ECS tasks","from_port":80,"id":"sgrule-2431670894","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-030921498d950b576","security_group_rule_id":"sgr-060e3c4fde5c4b809","self":false,"source_security_group_id":"sg-0f8571b0fc3221e81","timeouts":null,"to_port":80,"type":"ingress"},"sensitive_values":{},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_service"},{"resources":[{"address":"module.ecs_service_auto_scaling.aws_appautoscaling_policy.ecs_target_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_cpu","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alarm_arns":["arn:aws:cloudwatch:us-east-1:010575877879:alarm:TargetTracking-service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2-AlarmHigh-4db797e3-19db-4503-9a4e-0c59bbb6e124","arn:aws:cloudwatch:us-east-1:010575877879:alarm:TargetTracking-service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2-AlarmLow-eddfbfbe-f60d-47f4-8ed3-e6d5ef6a5f63"],"arn":"arn:aws:autoscaling:us-east-1:010575877879:scalingPolicy:7af576e4-2ee6-4862-a7dc-a9a65717b24c:resource/ecs/service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2:policyName/application-scaling-policy-cpu","id":"application-scaling-policy-cpu","name":"application-scaling-policy-cpu","policy_type":"TargetTrackingScaling","resource_id":"service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":""}],"scale_in_cooldown":300,"scale_out_cooldown":300,"target_value":80}]},"sensitive_values":{"alarm_arns":[false,false],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service.aws_ecs_service.app","module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","module.ecs_service_auto_scaling.aws_appautoscaling_target.ecs_target","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_service_nodes.aws_security_group_rule.allow_alb_to_nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_policy.custom_ssm_policy","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.ecs_task_role.aws_iam_role_policy.container_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ec2_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecr_policy","module.ecs_task_role.aws_iam_role_policy.ecs_exec_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_instance_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_instance_docker_policy","module.ecs_task_role.aws_iam_role_policy.ecs_managed_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv1","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv2","module.ecs_task_role.aws_iam_role_policy.ecs_stop_task_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v1","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v2","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_network_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_role_vpc_policy","module.ecs_task_role.aws_iam_role_policy.enhanced_monitoring_policy","module.ecs_task_role.aws_iam_role_policy.task_cloudwatch_policy","module.ecs_task_role.aws_iam_role_policy.task_filesystem_write_policy","module.ecs_task_role.aws_iam_role_policy.task_role_policy","module.ecs_task_role.aws_iam_role_policy.task_s3_policy","module.ecs_task_role.aws_iam_role_policy.task_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.custom_ssm_policy_attachment","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_instance_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ssm_instance_policy","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_service_auto_scaling.aws_appautoscaling_policy.ecs_target_memory","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_memory","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alarm_arns":["arn:aws:cloudwatch:us-east-1:010575877879:alarm:TargetTracking-service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2-AlarmHigh-b809dbd1-383a-4538-80dd-8d6f132b3c98","arn:aws:cloudwatch:us-east-1:010575877879:alarm:TargetTracking-service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2-AlarmLow-ad9e775c-05cd-4c4c-9204-4fa0cf55115b"],"arn":"arn:aws:autoscaling:us-east-1:010575877879:scalingPolicy:7af576e4-2ee6-4862-a7dc-a9a65717b24c:resource/ecs/service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2:policyName/application-scaling-policy-memory","id":"application-scaling-policy-memory","name":"application-scaling-policy-memory","policy_type":"TargetTrackingScaling","resource_id":"service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageMemoryUtilization","resource_label":""}],"scale_in_cooldown":300,"scale_out_cooldown":300,"target_value":80}]},"sensitive_values":{"alarm_arns":[false,false],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service.aws_ecs_service.app","module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","module.ecs_service_auto_scaling.aws_appautoscaling_target.ecs_target","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_service_nodes.aws_security_group_rule.allow_alb_to_nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_policy.custom_ssm_policy","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.ecs_task_role.aws_iam_role_policy.container_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ec2_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecr_policy","module.ecs_task_role.aws_iam_role_policy.ecs_exec_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_instance_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_instance_docker_policy","module.ecs_task_role.aws_iam_role_policy.ecs_managed_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv1","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv2","module.ecs_task_role.aws_iam_role_policy.ecs_stop_task_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v1","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v2","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_network_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_role_vpc_policy","module.ecs_task_role.aws_iam_role_policy.enhanced_monitoring_policy","module.ecs_task_role.aws_iam_role_policy.task_cloudwatch_policy","module.ecs_task_role.aws_iam_role_policy.task_filesystem_write_policy","module.ecs_task_role.aws_iam_role_policy.task_role_policy","module.ecs_task_role.aws_iam_role_policy.task_s3_policy","module.ecs_task_role.aws_iam_role_policy.task_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.custom_ssm_policy_attachment","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_instance_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ssm_instance_policy","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_service_auto_scaling.aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:application-autoscaling:us-east-1:010575877879:scalable-target/0ec57af576e42ee64862a7dca9a65717b24c","id":"service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2","max_capacity":5,"min_capacity":1,"resource_id":"service/demo-cluster-82a5a8b2/demo-ecs-Nservice-82a5a8b2","role_arn":"arn:aws:iam::010575877879:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","suspended_state":[{"dynamic_scaling_in_suspended":false,"dynamic_scaling_out_suspended":false,"scheduled_scaling_suspended":false}],"tags":null,"tags_all":{}},"sensitive_values":{"suspended_state":[{}],"tags_all":{}},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service.aws_ecs_service.app","module.ecs_service.aws_security_group_rule.allow_alb_to_ecs","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_service_nodes.aws_security_group_rule.allow_alb_to_nodejs","module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","module.ecs_task_definition.aws_ecs_task_definition.app","module.ecs_task_definition.aws_security_group.ecs_tasks","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_policy.custom_ssm_policy","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.ecs_task_role.aws_iam_role_policy.container_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ec2_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecr_policy","module.ecs_task_role.aws_iam_role_policy.ecs_exec_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_discovery_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_exec_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_instance_additional_permissions","module.ecs_task_role.aws_iam_role_policy.ecs_instance_docker_policy","module.ecs_task_role.aws_iam_role_policy.ecs_managed_tags_policy","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv1","module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv2","module.ecs_task_role.aws_iam_role_policy.ecs_stop_task_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v1","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v2","module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_network_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_metadata_policy","module.ecs_task_role.aws_iam_role_policy.ecs_task_role_vpc_policy","module.ecs_task_role.aws_iam_role_policy.enhanced_monitoring_policy","module.ecs_task_role.aws_iam_role_policy.task_cloudwatch_policy","module.ecs_task_role.aws_iam_role_policy.task_filesystem_write_policy","module.ecs_task_role.aws_iam_role_policy.task_role_policy","module.ecs_task_role.aws_iam_role_policy.task_s3_policy","module.ecs_task_role.aws_iam_role_policy.task_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.custom_ssm_policy_attachment","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_ssm_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ecs_instance_role_policy","module.ecs_task_role.aws_iam_role_policy_attachment.ssm_instance_policy","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_service_auto_scaling"},{"resources":[{"address":"module.ecs_service_nodes.aws_ecs_service.nodejs","mode":"managed","type":"aws_ecs_service","name":"nodejs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"demo-cluster-82a5a8b2","deployment_circuit_breaker":[{"enable":true,"rollback":true}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":true,"enable_execute_command":true,"force_delete":null,"force_new_deployment":true,"health_check_grace_period_seconds":120,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:us-east-1:010575877879:service/demo-cluster-82a5a8b2/ECS-s-node","launch_type":"EC2","load_balancer":[{"container_name":"my-container-nodejs","container_port":3000,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:010575877879:targetgroup/tg-nodejs-demo-alb-82a5a8b2-c7e6/142d4d7ea8f3b578"}],"name":"ECS-s-node","network_configuration":[],"ordered_placement_strategy":[{"field":"cpu","type":"binpack"}],"placement_constraints":[{"expression":"attribute:ecs.availability-zone == us-east-1a","type":"memberOf"}],"platform_version":"","propagate_tags":"SERVICE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[{"container_name":"my-container-nodejs","container_port":3000,"port":0,"registry_arn":"arn:aws:servicediscovery:us-east-1:010575877879:service/srv-oxyfeqhhgo3lr2sw"}],"tags":null,"tags_all":{},"task_definition":"arn:aws:ecs:us-east-1:010575877879:task-definition/node-task-82a5a8b2:1","timeouts":{"create":"30m","delete":"30m","update":"30m"},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[],"ordered_placement_strategy":[{}],"placement_constraints":[{}],"service_connect_configuration":[],"service_registries":[{}],"tags_all":{},"timeouts":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_service_nodes.aws_security_group_rule.allow_alb_to_nodejs","mode":"managed","type":"aws_security_group_rule","name":"allow_alb_to_nodejs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow ALB to Node.js ECS tasks","from_port":3000,"id":"sgrule-2549325686","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-030921498d950b576","security_group_rule_id":"sgr-07409da2aaf3deb72","self":false,"source_security_group_id":"sg-09876fbb4ba7178f6","timeouts":null,"to_port":3000,"type":"ingress"},"sensitive_values":{},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]}],"address":"module.ecs_service_nodes"},{"resources":[{"address":"module.ecs_task_definition.aws_cloudwatch_log_group.ecs_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:010575877879:log-group:/ecs/nginx-task-82a5a8b2","id":"/ecs/nginx-task-82a5a8b2","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/nginx-task-82a5a8b2","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}},"depends_on":["module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","random_id.unique"]},{"address":"module.ecs_task_definition.aws_ecs_task_definition.app","mode":"managed","type":"aws_ecs_task_definition","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:us-east-1:010575877879:task-definition/nginx-task-82a5a8b2:1","arn_without_revision":"arn:aws:ecs:us-east-1:010575877879:task-definition/nginx-task-82a5a8b2","container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"NODEJS_SERVICE_NAME\",\"value\":\"ECS-s-node\"},{\"name\":\"TASK_INDEX\",\"value\":\"4\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"test -r /var/run/docker.sock \u0026\u0026 curl -f http://localhost/health || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":60,\"timeout\":5},\"image\":\"awsemc1980/my_custom_nginx_image1:v7\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-stream-prefix\":\"ecs\",\"awslogs-group\":\"/ecs/nginx-task-82a5a8b2\",\"awslogs-region\":\"us-east-1\"}},\"memory\":256,\"mountPoints\":[{\"containerPath\":\"/var/run/docker.sock\",\"readOnly\":true,\"sourceVolume\":\"docker-sock\"}],\"name\":\"my-container-nginx\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::010575877879:role/demo-ecs-task-role-82a5a8b220241231140302608100000004","family":"nginx-task-82a5a8b2","id":"nginx-task-82a5a8b2","inference_accelerator":[],"ipc_mode":"","memory":"256","network_mode":"bridge","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["EC2"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":null,"tags_all":{},"task_role_arn":"arn:aws:iam::010575877879:role/demo-ecs-exec-role-82a5a8b220241231140303827900000006","track_latest":false,"volume":[{"configure_at_launch":false,"docker_volume_configuration":[],"efs_volume_configuration":[],"fsx_windows_file_server_volume_configuration":[],"host_path":"/var/run/docker.sock","name":"docker-sock"}]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags_all":{},"volume":[{"docker_volume_configuration":[],"efs_volume_configuration":[],"fsx_windows_file_server_volume_configuration":[]}]},"depends_on":["aws_key_pair.generated_key","data.aws_ami.ecs_optimized","data.aws_availability_zones.available","module.alb.aws_autoscaling_attachment.asg_attachment","module.alb.aws_lb.main","module.alb.aws_lb_listener.alb_ec2","module.alb.aws_lb_listener_rule.nginx_ecs","module.alb.aws_lb_listener_rule.nodejs_ecs","module.alb.aws_lb_target_group.ec2","module.alb.aws_lb_target_group.nginx_ecs","module.alb.aws_lb_target_group.nodejs_ecs","module.alb.aws_security_group.ec2","module.alb.aws_security_group.http","module.alb.aws_security_group.nginx_ecs_tasks","module.alb.aws_security_group.nodejs_ecs_tasks","module.alb.random_id.target_group_suffix","module.ecs_asg.aws_autoscaling_group.ecs","module.ecs_asg.aws_autoscaling_group.lb","module.ecs_asg.data.aws_autoscaling_group.ecs","module.ecs_asg.data.aws_autoscaling_group.lb","module.ecs_asg.data.aws_instances.ecs","module.ecs_asg.data.aws_instances.lb","module.ecs_capacity_provider.aws_ecs_capacity_provider.main","module.ecs_capacity_provider.aws_ecs_cluster_capacity_providers.main","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_launch_template.aws_cloudwatch_log_group.user_data_logs","module.ecs_launch_template.aws_launch_template.ecs_ec2","module.ecs_launch_template.data.aws_region.current","module.ecs_node_sg.aws_security_group.ecs_node_sg","module.ecs_node_sg.data.aws_vpc.selected","module.ecs_service_nodes.aws_ecs_service.nodejs","module.ecs_task_definition_node.aws_ecs_task_definition.app","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_instance_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","null_resource.cluster_ready","random_id.unique","tls_private_key.ssh_key"]},{"address":"module.ecs_task_definition.aws_security_group.ecs_tasks","mode":"managed","type":"aws_security_group","name":"ecs_tasks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:security-group/sg-017d7b00e4862e962","description":"Security group for ECS tasks with Nginx","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-017d7b00e4862e962","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Application Port","from_port":3000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":3000},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from VPC","from_port":80,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"ecs-tasks-sg","name_prefix":"","owner_id":"010575877879","revoke_rules_on_delete":false,"tags":{"Name":"ecs-tasks-security-group"},"tags_all":{"Name":"ecs-tasks-security-group"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.ecs_task_definition"},{"resources":[{"address":"module.ecs_task_definition_node.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}},{"address":"module.ecs_task_definition_node.aws_ecs_task_definition.app","mode":"managed","type":"aws_ecs_task_definition","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:us-east-1:010575877879:task-definition/node-task-82a5a8b2:1","arn_without_revision":"arn:aws:ecs:us-east-1:010575877879:task-definition/node-task-82a5a8b2","container_definitions":"[{\"cpu\":128,\"dockerLabels\":{\"custom.container-name\":\"#{aws:TaskARN}\",\"app.service.identity\":\"my-container-nodejs-#{container:DockerId}\",\"service\":\"nodejs\",\"task-definition-family\":\"node-task-82a5a8b2\",\"container-name\":\"my-container-nodejs\"},\"environment\":[{\"name\":\"AWS_REGION\",\"value\":\"us-east-1\"},{\"name\":\"CONTAINER_ID\",\"value\":\"#{container:DockerId}\"},{\"name\":\"DISCOVERY_INTERVAL\",\"value\":\"30\"},{\"name\":\"ECS_CLUSTER\",\"value\":\"demo-cluster-82a5a8b2\"},{\"name\":\"ECS_CONTAINER_METADATA_URI\",\"value\":\"#{ECS_CONTAINER_METADATA_URI_V4}\"},{\"name\":\"ECS_CONTAINER_NAME\",\"value\":\"my-container-nodejs\"},{\"name\":\"ECS_SERVICE_NAME\",\"value\":\"ECS-s-node\"},{\"name\":\"PORT\",\"value\":\"3000\"},{\"name\":\"SERVICE_DISCOVERY_NAME\",\"value\":\"ECS-discovery.ns-ejamhy7gif2zfjpa\"},{\"name\":\"SERVICE_IDENTITY\",\"value\":\"my-container-nodejs\"},{\"name\":\"TASK_ID\",\"value\":\"#{aws:TaskARN}\"},{\"name\":\"TASK_INSTANCE\",\"value\":\"#{container:DockerId}\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"wget -q --spider http://localhost:3000/health || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":60,\"timeout\":5},\"image\":\"awsemc1980/custom-node-service:v2\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-create-group\":\"true\",\"max-buffer-size\":\"4m\",\"awslogs-region\":\"us-east-1\",\"awslogs-stream-prefix\":\"ecs\",\"awslogs-group\":\"log_group-82a5a8b2\",\"mode\":\"non-blocking\"}},\"memory\":128,\"mountPoints\":[{\"containerPath\":\"/var/log/nginx\",\"readOnly\":false,\"sourceVolume\":\"nginx-logs\"}],\"name\":\"my-container-nodejs\",\"portMappings\":[{\"containerPort\":3000,\"hostPort\":0,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"128","ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::010575877879:role/demo-ecs-task-role-82a5a8b220241231140302608100000004","family":"node-task-82a5a8b2","id":"node-task-82a5a8b2","inference_accelerator":[],"ipc_mode":"","memory":"128","network_mode":"bridge","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["EC2"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"nodejs-app","Managed-by":"terraform","Service":"my-container-nodejs"},"tags_all":{"Environment":"nodejs-app","Managed-by":"terraform","Service":"my-container-nodejs"},"task_role_arn":"arn:aws:iam::010575877879:role/demo-ecs-exec-role-82a5a8b220241231140303827900000006","track_latest":false,"volume":[{"configure_at_launch":false,"docker_volume_configuration":[],"efs_volume_configuration":[],"fsx_windows_file_server_volume_configuration":[],"host_path":"/var/log/ecs/nginx","name":"nginx-logs"}]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[{"docker_volume_configuration":[],"efs_volume_configuration":[],"fsx_windows_file_server_volume_configuration":[]}]},"depends_on":["data.aws_availability_zones.available","module.ecs_cluster.aws_ecs_cluster.main","module.ecs_task_definition_node.data.aws_region.current","module.ecs_task_role.aws_iam_role.ecs_exec_role","module.ecs_task_role.aws_iam_role.ecs_task_role","module.log_group.aws_cloudwatch_log_group.this","module.log_group.aws_cloudwatch_log_stream.this","module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.service_discovery.aws_service_discovery_service.nodejs","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.ecs_task_definition_node"},{"resources":[{"address":"module.ecs_task_role.aws_iam_instance_profile.ecs_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ecs_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:instance-profile/ecs-instance-profile-2024123114030451320000000a","create_date":"2024-12-31T14:03:04Z","id":"ecs-instance-profile-2024123114030451320000000a","name":"ecs-instance-profile-2024123114030451320000000a","name_prefix":"ecs-instance-profile-","path":"/","role":"ecs-instance-role-20241231140302609500000005","tags":null,"tags_all":{},"unique_id":"AIPAQE5S7C33UAT2TEBZN"},"sensitive_values":{"tags_all":{}},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_policy.custom_ssm_policy","mode":"managed","type":"aws_iam_policy","name":"custom_ssm_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:policy/CustomSSMInstancePolicy","attachment_count":0,"description":"","id":"arn:aws:iam::010575877879:policy/CustomSSMInstancePolicy","name":"CustomSSMInstancePolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQE5S7C333FTJUK2KW","tags":null,"tags_all":{}},"sensitive_values":{"tags_all":{}}},{"address":"module.ecs_task_role.aws_iam_role.ecs_exec_role","mode":"managed","type":"aws_iam_role","name":"ecs_exec_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:role/demo-ecs-exec-role-82a5a8b220241231140303827900000006","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-12-31T14:03:04Z","description":"","force_detach_policies":false,"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"demo-ecs-exec-role-82a5a8b220241231140303827900000006","name_prefix":"demo-ecs-exec-role-82a5a8b2","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAQE5S7C336MNZTWSFB"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"depends_on":["random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role.ecs_instance_role","mode":"managed","type":"aws_iam_role","name":"ecs_instance_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:role/ecs-instance-role-20241231140302609500000005","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-12-31T14:03:03Z","description":"","force_detach_policies":false,"id":"ecs-instance-role-20241231140302609500000005","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"ecs-instance-role-20241231140302609500000005","name_prefix":"ecs-instance-role-","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAQE5S7C33WWQRYUX3G"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.ecs_task_role.aws_iam_role.ecs_task_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::010575877879:role/demo-ecs-task-role-82a5a8b220241231140302608100000004","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-12-31T14:03:03Z","description":"","force_detach_policies":false,"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"demo-ecs-task-role-82a5a8b220241231140302608100000004","name_prefix":"demo-ecs-task-role-82a5a8b2","path":"/","permissions_boundary":"","tags":null,"tags_all":{},"unique_id":"AROAQE5S7C33S63AXPC2U"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"depends_on":["random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.container_discovery_permissions","mode":"managed","type":"aws_iam_role_policy","name":"container_discovery_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:container-discovery-permissions","name":"container-discovery-permissions","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:DiscoverPollEndpoint\",\"ecs:Poll\",\"ecs:RegisterContainerInstance\",\"ecs:DeregisterContainerInstance\",\"ecs:SubmitContainerStateChange\",\"ecs:SubmitTaskStateChange\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ec2_metadata_policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2_metadata_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005:ec2-metadata-policy","name":"ec2-metadata-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:DescribeInstances\",\"ec2:DescribeTags\",\"ec2:DescribeInstanceTypes\",\"ec2:DescribeInstanceStatus\",\"ecs:ListAttributes\",\"ecs:GetAttributes\",\"ecs:ListTaskDefinitionFamilies\",\"ecs:ListTagsForResource\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecr_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecr_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecr_policy","name":"ecr_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_exec_additional_permissions","mode":"managed","type":"aws_iam_role_policy","name":"ecs_exec_additional_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecs-exec-additional-permissions","name":"ecs-exec-additional-permissions","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ecs:ListServices\",\"ecs:DescribeServices\",\"ecs:ListClusters\",\"ecs:DescribeClusters\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_exec_discovery_permissions","mode":"managed","type":"aws_iam_role_policy","name":"ecs_exec_discovery_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecs-exec-discovery-permissions","name":"ecs-exec-discovery-permissions","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:DescribeContainerInstances\",\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_exec_tags_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_exec_tags_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecs-exec-tags-policy","name":"ecs-exec-tags-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:CreateTags\",\"ec2:DeleteTags\",\"ecs:TagResource\",\"ecs:UntagResource\",\"ecs:ListTagsForResource\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_instance_additional_permissions","mode":"managed","type":"aws_iam_role_policy","name":"ecs_instance_additional_permissions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005:ecs-instance-additional-permissions","name":"ecs-instance-additional-permissions","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ecs:ListServices\",\"ecs:DescribeServices\",\"ecs:ListClusters\",\"ecs:DescribeClusters\",\"ecs:DescribeContainerInstances\",\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_instance_docker_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_instance_docker_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005:ecs_instance_docker_policy","name":"ecs_instance_docker_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"ssm:UpdateInstanceInformation\",\"ssm:UpdateInstanceAssociationStatus\",\"ssm:ListInstanceAssociations\",\"ssm:DescribeInstanceProperties\",\"ec2messages:*\",\"ssmmessages:*\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_managed_tags_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_managed_tags_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs-managed-tags-policy","name":"ecs-managed-tags-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:CreateTags\",\"ec2:DeleteTags\",\"ecs:TagResource\",\"ecs:UntagResource\",\"ecs:ListTagsForResource\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv1","mode":"managed","type":"aws_iam_role_policy","name":"ecs_service_discoveryv1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecs-service-discovery-policy","name":"ecs-service-discovery-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:DescribeServices\",\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ecs:DescribeContainerInstances\",\"ec2:DescribeInstances\",\"ecs:DiscoverInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_service_discoveryv2","mode":"managed","type":"aws_iam_role_policy","name":"ecs_service_discoveryv2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006:ecs-service-discovery-policy","name":"ecs-service-discovery-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:DescribeServices\",\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ecs:DescribeContainerInstances\",\"ec2:DescribeInstances\",\"ecs:DiscoverInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_stop_task_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_stop_task_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs-stop-task-policy","name":"ecs-stop-task-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"ecs:StopTask\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ecs:*:*:task/*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v1","mode":"managed","type":"aws_iam_role_policy","name":"ecs_task_execution_docker_policy_v1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs_task_execution_docker_policy","name":"ecs_task_execution_docker_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"ecs:ExecuteCommand\",\"ecs:RunTask\",\"ecs:StopTask\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_docker_policy_v2","mode":"managed","type":"aws_iam_role_policy","name":"ecs_task_execution_docker_policy_v2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs_task_execution_docker_policy","name":"ecs_task_execution_docker_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_task_execution_network_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_task_execution_network_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs_task_execution_network_policy","name":"ecs_task_execution_network_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:DescribeNetworkInterfaces\",\"ec2:CreateNetworkInterface\",\"ec2:DeleteNetworkInterface\",\"ec2:DescribeInstances\",\"ec2:AttachNetworkInterface\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_task_metadata_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_task_metadata_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs-task-metadata-policy","name":"ecs-task-metadata-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:DescribeTasks\",\"ecs:ListTasks\",\"ecs:DescribeContainerInstances\",\"ecs:DescribeClusters\",\"ecs:ListContainerInstances\",\"ecs:ListClusters\",\"ecs:ListServices\",\"ecs:DescribeServices\",\"ecs:ListTaskDefinitions\",\"ecs:DescribeTaskDefinition\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.ecs_task_role_vpc_policy","mode":"managed","type":"aws_iam_role_policy","name":"ecs_task_role_vpc_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs_task_vpc_policy","name":"ecs_task_vpc_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:CreateNetworkInterface\",\"ec2:DescribeNetworkInterfaces\",\"ec2:DeleteNetworkInterface\",\"ec2:DescribeInstances\",\"ec2:AttachNetworkInterface\",\"ec2:DetachNetworkInterface\",\"ecs:DescribeClusters\",\"ec2:DescribeInstanceStatus\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.enhanced_monitoring_policy","mode":"managed","type":"aws_iam_role_policy","name":"enhanced_monitoring_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:enhanced-monitoring-policy","name":"enhanced-monitoring-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"cloudwatch:PutMetricData\",\"cloudwatch:GetMetricStatistics\",\"cloudwatch:ListMetrics\",\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:DescribeLogStreams\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.task_cloudwatch_policy","mode":"managed","type":"aws_iam_role_policy","name":"task_cloudwatch_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:task_cloudwatch_policy","name":"task_cloudwatch_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.task_filesystem_write_policy","mode":"managed","type":"aws_iam_role_policy","name":"task_filesystem_write_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:task-filesystem-write-policy","name":"task-filesystem-write-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"efs:WriteFile\",\"efs:WriteData\",\"efs:CreateFileSystem\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.task_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"task_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:ecs-task-role-policy","name":"ecs-task-role-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:ListTasks\",\"ecs:DescribeTasks\",\"ecs:DescribeContainerInstances\",\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.task_s3_policy","mode":"managed","type":"aws_iam_role_policy","name":"task_s3_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:demo-ecs-task-role-82a5a8b2-s3-policy","name":"demo-ecs-task-role-82a5a8b2-s3-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::dev-tfstate-0e982c82f3f4acdb/*\"]}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.backend.aws_s3_bucket.terraform_state","module.backend.random_id.unique","module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy.task_ssm_policy","mode":"managed","type":"aws_iam_role_policy","name":"task_ssm_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-task-role-82a5a8b220241231140302608100000004:task_ssm_policy","name":"task_ssm_policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameter\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ssm:*:*:parameter/*\"},{\"Action\":[\"ssmmessages:CreateControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:OpenDataChannel\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:DescribeLogGroups\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"demo-ecs-task-role-82a5a8b220241231140302608100000004"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_task_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy_attachment.custom_ssm_policy_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"custom_ssm_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005-20241231140307039200000012","policy_arn":"arn:aws:iam::010575877879:policy/CustomSSMInstancePolicy","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_policy.custom_ssm_policy","module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_exec_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006-20241231140307916600000016","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy_attachment.ecs_exec_role_ssm_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_exec_role_ssm_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"demo-ecs-exec-role-82a5a8b220241231140303827900000006-20241231140307459200000015","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess","role":"demo-ecs-exec-role-82a5a8b220241231140303827900000006"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_exec_role","random_id.unique"]},{"address":"module.ecs_task_role.aws_iam_role_policy_attachment.ecs_instance_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_instance_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005-2024123114030502220000000e","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]},{"address":"module.ecs_task_role.aws_iam_role_policy_attachment.ssm_instance_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm_instance_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"ecs-instance-role-20241231140302609500000005-2024123114030492510000000d","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"ecs-instance-role-20241231140302609500000005"},"sensitive_values":{},"depends_on":["module.ecs_task_role.aws_iam_role.ecs_instance_role"]}],"address":"module.ecs_task_role"},{"resources":[{"address":"module.internet_gateway.aws_eip.main[0]","mode":"managed","type":"aws_eip","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0ddff8479347f4a32","arn":"arn:aws:ec2:us-east-1:010575877879:elastic-ip/eipalloc-0ddff8479347f4a32","associate_with_private_ip":null,"association_id":"","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0ddff8479347f4a32","instance":"","ipam_pool_id":null,"network_border_group":"us-east-1","network_interface":"","private_dns":null,"private_ip":"","ptr_record":"","public_dns":"ec2-54-235-79-19.compute-1.amazonaws.com","public_ip":"54.235.79.19","public_ipv4_pool":"amazon","tags":{"Name":"demo-eip-us-east-1a"},"tags_all":{"Name":"demo-eip-us-east-1a"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.internet_gateway.aws_eip.main[1]","mode":"managed","type":"aws_eip","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0a9718e7f88d53947","arn":"arn:aws:ec2:us-east-1:010575877879:elastic-ip/eipalloc-0a9718e7f88d53947","associate_with_private_ip":null,"association_id":"","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0a9718e7f88d53947","instance":"","ipam_pool_id":null,"network_border_group":"us-east-1","network_interface":"","private_dns":null,"private_ip":"","ptr_record":"","public_dns":"ec2-44-221-39-34.compute-1.amazonaws.com","public_ip":"44.221.39.34","public_ipv4_pool":"amazon","tags":{"Name":"demo-eip-us-east-1b"},"tags_all":{"Name":"demo-eip-us-east-1b"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.internet_gateway.aws_internet_gateway.main","mode":"managed","type":"aws_internet_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:internet-gateway/igw-081550b226f2fd201","id":"igw-081550b226f2fd201","owner_id":"010575877879","tags":{"Name":"demo-igw-82a5a8b2"},"tags_all":{"Name":"demo-igw-82a5a8b2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.internet_gateway"},{"resources":[{"address":"module.log_group.aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:010575877879:log-group:log_group-82a5a8b2","id":"log_group-82a5a8b2","kms_key_id":"","log_group_class":"STANDARD","name":"log_group-82a5a8b2","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":{"Application":"ecs-cluster","Environment":"production"},"tags_all":{"Application":"ecs-cluster","Environment":"production"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["random_id.unique"]},{"address":"module.log_group.aws_cloudwatch_log_stream.this","mode":"managed","type":"aws_cloudwatch_log_stream","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:010575877879:log-group:log_group-82a5a8b2:log-stream:log_group-82a5a8b2-stream","id":"log_group-82a5a8b2-stream","log_group_name":"log_group-82a5a8b2","name":"log_group-82a5a8b2-stream"},"sensitive_values":{},"depends_on":["module.log_group.aws_cloudwatch_log_group.this","random_id.unique"]}],"address":"module.log_group"},{"resources":[{"address":"module.nat_gateway.aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0151f611be3d82346","arn":"arn:aws:ec2:us-east-1:010575877879:elastic-ip/eipalloc-0151f611be3d82346","associate_with_private_ip":null,"association_id":"","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0151f611be3d82346","instance":"","ipam_pool_id":null,"network_border_group":"us-east-1","network_interface":"","private_dns":null,"private_ip":"","ptr_record":"","public_dns":"ec2-34-205-120-9.compute-1.amazonaws.com","public_ip":"34.205.120.9","public_ipv4_pool":"amazon","tags":{"Name":"demo-eip-nat"},"tags_all":{"Name":"demo-eip-nat"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.nat_gateway.aws_nat_gateway.main","mode":"managed","type":"aws_nat_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-0151f611be3d82346","association_id":"eipassoc-030ca5aec65f11488","connectivity_type":"public","id":"nat-0de81dfce051277c5","network_interface_id":"eni-08ab8adb9f7d43b70","private_ip":"10.0.0.58","public_ip":"34.205.120.9","secondary_allocation_ids":null,"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-04bd9aa18e82fd83e","tags":{"Name":"demo-nat-gw"},"tags_all":{"Name":"demo-nat-gw"},"timeouts":{"create":"30m","delete":"30m","update":null}},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{},"timeouts":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.nat_gateway"},{"resources":[{"address":"module.route_table.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0bc4c9aa75ee15d371080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0de81dfce051277c5","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0bc4c9aa75ee15d37","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.private","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route.private_nat_gateway[1]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-0237d21dc2812f8a41080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0de81dfce051277c5","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0237d21dc2812f8a4","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.private","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-081550b226f2fd201","id":"r-rtb-0bc43807f49e500581080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0bc43807f49e50058","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.public","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:route-table/rtb-0bc4c9aa75ee15d37","id":"rtb-0bc4c9aa75ee15d37","owner_id":"010575877879","propagating_vgws":[],"route":[],"tags":{"Name":"demo-private-rt-1"},"tags_all":{"Name":"demo-private-rt-1"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:route-table/rtb-0237d21dc2812f8a4","id":"rtb-0237d21dc2812f8a4","owner_id":"010575877879","propagating_vgws":[],"route":[],"tags":{"Name":"demo-private-rt-2"},"tags_all":{"Name":"demo-private-rt-2"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:route-table/rtb-0bc43807f49e50058","id":"rtb-0bc43807f49e50058","owner_id":"010575877879","propagating_vgws":[],"route":[],"tags":{"Name":"demo-public-rt"},"tags_all":{"Name":"demo-public-rt"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-00e58d8ae9629e7bc","route_table_id":"rtb-0bc4c9aa75ee15d37","subnet_id":"subnet-0b2b0edf12a8178c6","timeouts":null},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.private","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-049aed14c5ab26ff6","route_table_id":"rtb-0237d21dc2812f8a4","subnet_id":"subnet-0da891b8774e4876e","timeouts":null},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.private","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-01479c1696181840c","route_table_id":"rtb-0bc43807f49e50058","subnet_id":"subnet-04bd9aa18e82fd83e","timeouts":null},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.public","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.route_table.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0258e3374bbb64a1a","route_table_id":"rtb-0bc43807f49e50058","subnet_id":"subnet-0e14e0a9592a6fad8","timeouts":null},"sensitive_values":{},"depends_on":["data.aws_availability_zones.available","module.internet_gateway.aws_eip.main","module.internet_gateway.aws_internet_gateway.main","module.nat_gateway.aws_eip.nat","module.nat_gateway.aws_nat_gateway.main","module.route_table.aws_route_table.public","module.vpc.aws_subnet.private","module.vpc.aws_subnet.public","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.route_table"},{"resources":[{"address":"module.service_discovery.aws_service_discovery_private_dns_namespace.this","mode":"managed","type":"aws_service_discovery_private_dns_namespace","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:servicediscovery:us-east-1:010575877879:namespace/ns-ejamhy7gif2zfjpa","description":"Private DNS namespace for dev services","hosted_zone":"Z00405131CNEY898F14EU","id":"ns-ejamhy7gif2zfjpa","name":"dev-services","tags":null,"tags_all":{},"vpc":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.service_discovery.aws_service_discovery_service.nodejs","mode":"managed","type":"aws_service_discovery_service","name":"nodejs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:servicediscovery:us-east-1:010575877879:service/srv-oxyfeqhhgo3lr2sw","description":"","dns_config":[{"dns_records":[{"ttl":10,"type":"SRV"}],"namespace_id":"ns-ejamhy7gif2zfjpa","routing_policy":"MULTIVALUE"}],"force_destroy":false,"health_check_config":[],"health_check_custom_config":[{"failure_threshold":1}],"id":"srv-oxyfeqhhgo3lr2sw","name":"ECS-discovery","namespace_id":"ns-ejamhy7gif2zfjpa","tags":null,"tags_all":{},"type":"DNS_HTTP"},"sensitive_values":{"dns_config":[{"dns_records":[{}]}],"health_check_config":[],"health_check_custom_config":[{}],"tags_all":{}},"depends_on":["module.service_discovery.aws_service_discovery_private_dns_namespace.this","module.vpc.aws_vpc.main","random_id.unique"]}],"address":"module.service_discovery"},{"resources":[{"address":"module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:subnet/subnet-0b2b0edf12a8178c6","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b2b0edf12a8178c6","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"010575877879","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"demo-vpc-82a5a8b2-private-us-east-1a"},"tags_all":{"Name":"demo-vpc-82a5a8b2-private-us-east-1a"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:subnet/subnet-0da891b8774e4876e","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0da891b8774e4876e","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"010575877879","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"demo-vpc-82a5a8b2-private-us-east-1b"},"tags_all":{"Name":"demo-vpc-82a5a8b2-private-us-east-1b"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:subnet/subnet-04bd9aa18e82fd83e","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-04bd9aa18e82fd83e","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"010575877879","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"demo-vpc-82a5a8b2-public-us-east-1a"},"tags_all":{"Name":"demo-vpc-82a5a8b2-public-us-east-1a"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:subnet/subnet-0e14e0a9592a6fad8","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e14e0a9592a6fad8","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"010575877879","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"demo-vpc-82a5a8b2-public-us-east-1b"},"tags_all":{"Name":"demo-vpc-82a5a8b2-public-us-east-1b"},"timeouts":null,"vpc_id":"vpc-057f028812bd7c22f"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["data.aws_availability_zones.available","module.vpc.aws_vpc.main","random_id.unique"]},{"address":"module.vpc.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:010575877879:vpc/vpc-057f028812bd7c22f","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0227cb953aae9ffe7","default_route_table_id":"rtb-0a282fd4841dc236f","default_security_group_id":"sg-00fd0758954a53c35","dhcp_options_id":"dopt-06d2655013d8d60c3","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-057f028812bd7c22f","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0a282fd4841dc236f","owner_id":"010575877879","tags":{"Name":"demo-vpc-82a5a8b2"},"tags_all":{"Name":"demo-vpc-82a5a8b2"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["random_id.unique"]}],"address":"module.vpc"}]}},"checks":[{"address":{"kind":"var","module":"module.backend","name":"environment","to_display":"module.backend.var.environment"},"status":"pass","instances":[{"address":{"module":"module.backend","to_display":"module.backend.var.environment"},"status":"pass"}]},{"address":{"kind":"var","module":"module.backend","name":"project_name","to_display":"module.backend.var.project_name"},"status":"pass","instances":[{"address":{"module":"module.backend","to_display":"module.backend.var.project_name"},"status":"pass"}]},{"address":{"kind":"var","module":"module.ecs_service","name":"nginx_port","to_display":"module.ecs_service.var.nginx_port"},"status":"pass","instances":[{"address":{"module":"module.ecs_service","to_display":"module.ecs_service.var.nginx_port"},"status":"pass"}]},{"address":{"kind":"var","module":"module.ecs_service","name":"target_group_arn","to_display":"module.ecs_service.var.target_group_arn"},"status":"pass","instances":[{"address":{"module":"module.ecs_service","to_display":"module.ecs_service.var.target_group_arn"},"status":"pass"}]}]}
